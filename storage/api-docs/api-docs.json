{
    "openapi": "3.0.0",
    "info": {
        "title": "API Facturación Electrónica Ecuador",
        "description": "Sistema de facturación electrónica para el SRI Ecuador",
        "contact": {
            "name": "Soporte Macrogram",
            "email": "soporte@macrobilling.com"
        },
        "license": {
            "name": "Privada",
            "url": "https://www.macrobilling.com"
        },
        "version": "1.0.0"
    },
    "servers": [
        {
            "url": "https://facturacion.macrobills.com/api",
            "description": "API Server"
        }
    ],
    "paths": {
        "/create-user": {
            "post": {
                "tags": [
                    "Administracion"
                ],
                "summary": "Crear un nuevo usuario",
                "description": "Crea un nuevo usuario en el sistema con los roles especificados",
                "operationId": "createUser",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "name",
                                    "email",
                                    "password",
                                    "password_confirmation",
                                    "scopes"
                                ],
                                "properties": {
                                    "name": {
                                        "description": "Nombre completo del usuario",
                                        "type": "string",
                                        "example": "Juan Pérez"
                                    },
                                    "email": {
                                        "description": "Correo electrónico único del usuario",
                                        "type": "string",
                                        "format": "email",
                                        "example": "juan@ejemplo.com"
                                    },
                                    "password": {
                                        "description": "Contraseña del usuario (mínimo 8 caracteres)",
                                        "type": "string",
                                        "format": "password",
                                        "example": "password123"
                                    },
                                    "password_confirmation": {
                                        "description": "Confirmación de la contraseña",
                                        "type": "string",
                                        "format": "password",
                                        "example": "password123"
                                    },
                                    "scopes": {
                                        "description": "Roles asignados al usuario",
                                        "type": "array",
                                        "items": {
                                            "type": "string",
                                            "enum": [
                                                "admin",
                                                "user",
                                                "desarrollo",
                                                "produccion"
                                            ],
                                            "example": "user"
                                        }
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Usuario creado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "success"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Usuario creado exitosamente"
                                        },
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "name": {
                                                    "type": "string",
                                                    "example": "Juan Pérez"
                                                },
                                                "email": {
                                                    "type": "string",
                                                    "example": "juan@ejemplo.com"
                                                },
                                                "scopes": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "user"
                                                    }
                                                },
                                                "created_at": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                },
                                                "updated_at": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Los datos proporcionados no son válidos"
                                        },
                                        "errors": {
                                            "properties": {
                                                "email": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "El correo electrónico ya está registrado"
                                                    }
                                                },
                                                "password": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "La contraseña debe tener al menos 8 caracteres"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "error"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Error al crear el usuario"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "No tienes permisos para crear usuarios"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "oauth2": [
                            "admin"
                        ]
                    }
                ]
            }
        },
        "/user/info": {
            "get": {
                "tags": [
                    "Administracion"
                ],
                "summary": "Obtener información del usuario autenticado",
                "description": "Retorna la información completa del usuario que está actualmente autenticado",
                "operationId": "getInfoUser",
                "responses": {
                    "200": {
                        "description": "Información del usuario recuperada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "id": {
                                            "type": "integer",
                                            "example": 1
                                        },
                                        "name": {
                                            "type": "string",
                                            "example": "Juan Pérez"
                                        },
                                        "email": {
                                            "type": "string",
                                            "format": "email",
                                            "example": "juan@ejemplo.com"
                                        },
                                        "email_verified_at": {
                                            "type": "string",
                                            "format": "date-time",
                                            "example": "2024-01-01T00:00:00.000000Z"
                                        },
                                        "scopes": {
                                            "type": "array",
                                            "items": {
                                                "type": "string",
                                                "example": [
                                                    "admin",
                                                    "user",
                                                    "desarrollo",
                                                    "produccion"
                                                ]
                                            }
                                        },
                                        "created_at": {
                                            "type": "string",
                                            "format": "date-time",
                                            "example": "2024-01-01T00:00:00.000000Z"
                                        },
                                        "updated_at": {
                                            "type": "string",
                                            "format": "date-time",
                                            "example": "2024-01-01T00:00:00.000000Z"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Prohibido",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "No tienes permisos para acceder"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "oauth2": []
                    }
                ]
            }
        },
        "/ride_xml/getRIDE": {
            "get": {
                "tags": [
                    "RIDE_XML"
                ],
                "summary": "Generación de RIDE",
                "description": "Generación de RIDE",
                "operationId": "generarRIDE",
                "parameters": [
                    {
                        "name": "uuid",
                        "in": "path",
                        "description": "Generación de RIDE",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Ride Generado Exitosamente"
                    },
                    "422": {
                        "description": "Ride En proceso de Generación"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/sri/consultar-ruc": {
            "get": {
                "tags": [
                    "SRI"
                ],
                "summary": "Obtiene información detallada de un RUC desde el SRI",
                "description": "Consulta la información de un contribuyente usando su número de RUC",
                "operationId": "consultarRuc",
                "parameters": [
                    {
                        "name": "ruc",
                        "in": "query",
                        "description": "Número de RUC del contribuyente",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "pattern": "^[0-9]{13}$"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Información del RUC recuperada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "ruc": {
                                                    "type": "string",
                                                    "example": "0927218487001"
                                                },
                                                "razon_social": {
                                                    "type": "string",
                                                    "example": "CONTRIBUYENTE PRUEBA"
                                                },
                                                "nombre_comercial": {
                                                    "type": "string",
                                                    "example": "NOMBRE COMERCIAL PRUEBA"
                                                },
                                                "estado_contribuyente": {
                                                    "type": "string",
                                                    "example": "ACTIVO"
                                                },
                                                "clase_contribuyente": {
                                                    "type": "string",
                                                    "example": "OTRO"
                                                },
                                                "tipo_contribuyente": {
                                                    "type": "string",
                                                    "example": "PERSONA NATURAL"
                                                },
                                                "obligado_contabilidad": {
                                                    "type": "boolean",
                                                    "example": true
                                                },
                                                "actividad_economica": {
                                                    "type": "string",
                                                    "example": "ACTIVIDADES DE DESARROLLO"
                                                },
                                                "fecha_inicio_actividades": {
                                                    "type": "string",
                                                    "format": "date",
                                                    "example": "2010-01-01"
                                                },
                                                "fecha_actualizacion": {
                                                    "type": "string",
                                                    "format": "date",
                                                    "example": "2023-12-31"
                                                },
                                                "fecha_consulta": {
                                                    "type": "string",
                                                    "format": "datetime",
                                                    "example": "2024-11-22 21:37:00"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autorizado"
                    },
                    "422": {
                        "description": "Datos inválidos"
                    }
                },
                "security": [
                    {
                        "oauth2": [
                            "admin",
                            "user"
                        ]
                    }
                ]
            }
        },
        "/facturacion/{claveAcceso}/pdf": {
            "get": {
                "tags": [
                    "Facturación"
                ],
                "summary": "Descargar PDF de la factura",
                "description": "Genera y descarga el PDF de una factura",
                "operationId": "descargarPDF",
                "parameters": [
                    {
                        "name": "claveAcceso",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "PDF de la factura",
                        "content": {
                            "application/pdf": {}
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/facturacion": {
            "post": {
                "tags": [
                    "Facturación"
                ],
                "summary": "Crear nueva factura electrónica",
                "description": "Crea y procesa una nueva factura electrónica según normativa SRI",
                "operationId": "crearFactura",
                "requestBody": {
                    "description": "Datos de la factura",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "empresa_id",
                                    "establecimiento_id",
                                    "punto_emision_id",
                                    "comprador",
                                    "detalles",
                                    "formas_pago"
                                ],
                                "properties": {
                                    "empresa_id": {
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "establecimiento_id": {
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "punto_emision_id": {
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "ambiente": {
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "fechaEmision": {
                                        "type": "string",
                                        "example": "17-01-2025"
                                    },
                                    "comprador": {
                                        "required": [
                                            "tipo_identificacion",
                                            "identificacion",
                                            "razon_social",
                                            "direccion",
                                            "email"
                                        ],
                                        "properties": {
                                            "tipo_identificacion": {
                                                "description": "04=RUC, 05=CEDULA, 06=PASAPORTE, 07=CONSUMIDOR_FINAL, 08=IDENTIFICACION_EXTERIOR",
                                                "type": "string",
                                                "enum": [
                                                    "04",
                                                    "05",
                                                    "06",
                                                    "07",
                                                    "08"
                                                ],
                                                "example": "04"
                                            },
                                            "identificacion": {
                                                "type": "string",
                                                "example": "0992877878001"
                                            },
                                            "razon_social": {
                                                "type": "string",
                                                "example": "EMPRESA EJEMPLO S.A."
                                            },
                                            "direccion": {
                                                "type": "string",
                                                "example": "Guayaquil - Ecuador"
                                            },
                                            "email": {
                                                "type": "string",
                                                "format": "email",
                                                "example": "cliente@ejemplo.com"
                                            }
                                        },
                                        "type": "object"
                                    },
                                    "detalles": {
                                        "type": "array",
                                        "items": {
                                            "required": [
                                                "codigo_principal",
                                                "descripcion",
                                                "cantidad",
                                                "precio_unitario",
                                                "descuento",
                                                "impuestos",
                                                "tipo_producto"
                                            ],
                                            "properties": {
                                                "codigo_principal": {
                                                    "type": "string",
                                                    "maxLength": 25,
                                                    "example": "PRD001"
                                                },
                                                "codigo_auxiliar": {
                                                    "type": "string",
                                                    "maxLength": 25,
                                                    "example": "AUX001"
                                                },
                                                "descripcion": {
                                                    "type": "string",
                                                    "maxLength": 300,
                                                    "example": "Producto de prueba"
                                                },
                                                "tipo_producto": {
                                                    "type": "string",
                                                    "enum": [
                                                        "NORMAL",
                                                        "MEDICINAS",
                                                        "CANASTA_BASICA",
                                                        "SERVICIOS_BASICOS",
                                                        "SERVICIOS_PROFESIONALES",
                                                        "EDUCACION",
                                                        "REGIMEN_SIMPLIFICADO",
                                                        "ESPECIAL",
                                                        "EXPORTACION"
                                                    ],
                                                    "example": "NORMAL"
                                                },
                                                "cantidad": {
                                                    "type": "number",
                                                    "format": "float",
                                                    "maximum": 999999999.999999,
                                                    "minimum": 1.0e-6,
                                                    "example": 2
                                                },
                                                "precio_unitario": {
                                                    "type": "number",
                                                    "format": "float",
                                                    "maximum": 999999999.999999,
                                                    "minimum": 0,
                                                    "example": 100
                                                },
                                                "descuento": {
                                                    "type": "number",
                                                    "format": "float",
                                                    "maximum": 999999999.99,
                                                    "minimum": 0,
                                                    "example": 10
                                                },
                                                "impuestos": {
                                                    "type": "array",
                                                    "items": {
                                                        "required": [
                                                            "codigo",
                                                            "codigo_porcentaje",
                                                            "base_imponible",
                                                            "valor"
                                                        ],
                                                        "properties": {
                                                            "codigo": {
                                                                "description": "Código SRI del impuesto según tipos_impuestos",
                                                                "type": "string",
                                                                "example": "02"
                                                            },
                                                            "codigo_porcentaje": {
                                                                "description": "Código SRI de la tarifa según tarifas_impuestos",
                                                                "type": "string",
                                                                "example": "4"
                                                            },
                                                            "impuesto_tarifa": {
                                                                "description": "Tarifa del SRI según el codigo Impuesto ",
                                                                "type": "number",
                                                                "example": 15
                                                            },
                                                            "base_imponible": {
                                                                "type": "number",
                                                                "format": "float",
                                                                "maximum": 999999999.99,
                                                                "minimum": 0,
                                                                "example": 190
                                                            },
                                                            "valor": {
                                                                "type": "number",
                                                                "format": "float",
                                                                "maximum": 999999999.99,
                                                                "minimum": 0,
                                                                "example": 28.5
                                                            }
                                                        },
                                                        "type": "object"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "formas_pago": {
                                        "type": "array",
                                        "items": {
                                            "required": [
                                                "forma_pago",
                                                "total"
                                            ],
                                            "properties": {
                                                "forma_pago": {
                                                    "description": "01=Efectivo, 15=Compensación, 16=Tarjeta Débito, 17=Dinero Electrónico, 18=Tarjeta Prepago, 19=Tarjeta Crédito, 20=Otros, 21=Endoso de Títulos",
                                                    "type": "string",
                                                    "enum": [
                                                        "01",
                                                        "15",
                                                        "16",
                                                        "17",
                                                        "18",
                                                        "19",
                                                        "20",
                                                        "21"
                                                    ],
                                                    "example": "01"
                                                },
                                                "total": {
                                                    "type": "number",
                                                    "format": "float",
                                                    "maximum": 999999999.99,
                                                    "minimum": 0,
                                                    "example": 276
                                                },
                                                "plazo": {
                                                    "type": "integer",
                                                    "minimum": 0,
                                                    "example": 0
                                                },
                                                "unidad_tiempo": {
                                                    "type": "string",
                                                    "enum": [
                                                        "dias",
                                                        "meses"
                                                    ],
                                                    "example": "dias"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "detalles_adicionales": {
                                        "type": "array",
                                        "items": {
                                            "required": [
                                                "nombre",
                                                "valor"
                                            ],
                                            "properties": {
                                                "nombre": {
                                                    "type": "string",
                                                    "maxLength": 300,
                                                    "example": "Vendedor"
                                                },
                                                "valor": {
                                                    "type": "string",
                                                    "maxLength": 300,
                                                    "example": "Juan Pérez"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "propina": {
                                        "type": "number",
                                        "format": "float",
                                        "maximum": 999999999.99,
                                        "minimum": 0,
                                        "example": 0
                                    },
                                    "observacion": {
                                        "type": "string",
                                        "maxLength": 300,
                                        "example": "Factura de prueba"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Factura creada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Factura creada exitosamente"
                                        },
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "clave_acceso": {
                                                    "type": "string",
                                                    "example": "2311202301099287787800110010010000000011234567813"
                                                },
                                                "numero_factura": {
                                                    "type": "string",
                                                    "example": "001-001-000000001"
                                                },
                                                "estado": {
                                                    "type": "string",
                                                    "enum": [
                                                        "CREADA",
                                                        "FIRMADA",
                                                        "ENVIADA",
                                                        "AUTORIZADA",
                                                        "RECHAZADA",
                                                        "ANULADA"
                                                    ],
                                                    "example": "CREADA"
                                                },
                                                "url_pdf": {
                                                    "type": "string",
                                                    "format": "uri"
                                                },
                                                "url_xml": {
                                                    "type": "string",
                                                    "format": "uri"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Error en los datos de la factura"
                                        },
                                        "error": {
                                            "type": "string"
                                        },
                                        "errors": {
                                            "type": "object",
                                            "example": {
                                                "comprador.tipo_identificacion": [
                                                    "El tipo de identificación no es válido"
                                                ],
                                                "detalles.0.impuestos": [
                                                    "Los impuestos son requeridos"
                                                ]
                                            },
                                            "additionalProperties": {
                                                "type": "array",
                                                "items": {
                                                    "type": "string"
                                                }
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Error interno del servidor"
                                        },
                                        "error": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "oauth2": []
                    }
                ]
            }
        },
        "/facturacion/{claveAcceso}": {
            "get": {
                "tags": [
                    "Facturación"
                ],
                "summary": "Consultar factura por clave de acceso",
                "description": "Obtiene el detalle completo de una factura usando su clave de acceso. La clave debe contener exactamente 49 dígitos numéricos.",
                "operationId": "consultarFactura",
                "parameters": [
                    {
                        "name": "claveAcceso",
                        "in": "path",
                        "description": "Clave de acceso de la factura (49 dígitos numéricos)",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "maxLength": 49,
                            "minLength": 10,
                            "example": "2311202301099287787800110010010000000011234567813"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Factura encontrada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "factura": {
                                                    "properties": {
                                                        "id": {
                                                            "type": "integer",
                                                            "example": 1
                                                        },
                                                        "clave_acceso": {
                                                            "type": "string",
                                                            "example": "2311202301099287787800110010010000000011234567813"
                                                        },
                                                        "estado": {
                                                            "type": "string",
                                                            "enum": [
                                                                "CREADA",
                                                                "FIRMADA",
                                                                "ENVIADA",
                                                                "AUTORIZADA",
                                                                "RECHAZADA",
                                                                "ANULADA"
                                                            ],
                                                            "example": "AUTORIZADA"
                                                        },
                                                        "fecha_emision": {
                                                            "type": "string",
                                                            "format": "date",
                                                            "example": "2023-11-20"
                                                        },
                                                        "razon_social_comprador": {
                                                            "type": "string",
                                                            "example": "CONSUMIDOR FINAL"
                                                        },
                                                        "identificacion_comprador": {
                                                            "type": "string",
                                                            "example": "9999999999999"
                                                        },
                                                        "total_sin_impuestos": {
                                                            "type": "number",
                                                            "format": "float",
                                                            "example": 100
                                                        },
                                                        "total_descuento": {
                                                            "type": "number",
                                                            "format": "float",
                                                            "example": 0
                                                        },
                                                        "total_impuestos": {
                                                            "type": "number",
                                                            "format": "float",
                                                            "example": 15
                                                        },
                                                        "importe_total": {
                                                            "type": "number",
                                                            "format": "float",
                                                            "example": 115
                                                        },
                                                        "detalles": {
                                                            "type": "array",
                                                            "items": {
                                                                "properties": {
                                                                    "id": {
                                                                        "type": "integer",
                                                                        "example": 1
                                                                    },
                                                                    "descripcion": {
                                                                        "type": "string",
                                                                        "example": "Producto de prueba"
                                                                    },
                                                                    "cantidad": {
                                                                        "type": "number",
                                                                        "format": "float",
                                                                        "example": 1
                                                                    },
                                                                    "precio_unitario": {
                                                                        "type": "number",
                                                                        "format": "float",
                                                                        "example": 100
                                                                    },
                                                                    "descuento": {
                                                                        "type": "number",
                                                                        "format": "float",
                                                                        "example": 0
                                                                    },
                                                                    "total": {
                                                                        "type": "number",
                                                                        "format": "float",
                                                                        "example": 100
                                                                    },
                                                                    "impuestos": {
                                                                        "type": "array",
                                                                        "items": {
                                                                            "properties": {
                                                                                "codigo": {
                                                                                    "type": "string",
                                                                                    "example": "2"
                                                                                },
                                                                                "codigo_porcentaje": {
                                                                                    "type": "string",
                                                                                    "example": "2"
                                                                                },
                                                                                "base_imponible": {
                                                                                    "type": "number",
                                                                                    "example": 100
                                                                                },
                                                                                "valor": {
                                                                                    "type": "number",
                                                                                    "example": 15
                                                                                }
                                                                            },
                                                                            "type": "object"
                                                                        }
                                                                    }
                                                                },
                                                                "type": "object"
                                                            }
                                                        },
                                                        "pagos": {
                                                            "type": "array",
                                                            "items": {
                                                                "properties": {
                                                                    "forma_pago": {
                                                                        "type": "string",
                                                                        "example": "01"
                                                                    },
                                                                    "total": {
                                                                        "type": "number",
                                                                        "format": "float",
                                                                        "example": 115
                                                                    },
                                                                    "plazo": {
                                                                        "type": "integer",
                                                                        "example": 0
                                                                    },
                                                                    "unidad_tiempo": {
                                                                        "type": "string",
                                                                        "example": "dias"
                                                                    }
                                                                },
                                                                "type": "object"
                                                            }
                                                        },
                                                        "detalles_adicionales": {
                                                            "type": "array",
                                                            "items": {
                                                                "properties": {
                                                                    "nombre": {
                                                                        "type": "string",
                                                                        "example": "Email"
                                                                    },
                                                                    "valor": {
                                                                        "type": "string",
                                                                        "example": "cliente@ejemplo.com"
                                                                    }
                                                                },
                                                                "type": "object"
                                                            }
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Formato de clave de acceso inválido",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "data": {
                                            "type": "null"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Formato de clave de acceso inválido"
                                        },
                                        "error": {
                                            "type": "string",
                                            "example": "La clave de acceso debe contener exactamente 49 dígitos numéricos"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Factura no encontrada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "data": {
                                            "type": "null"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Factura no encontrada"
                                        },
                                        "error": {
                                            "type": "string",
                                            "example": "No se encontró la factura con la clave de acceso proporcionada"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "No autorizado"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Prohibido",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "No tiene permisos para realizar esta acción"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "oauth2": [
                            "admin",
                            "user",
                            "desarrollo",
                            "produccion"
                        ]
                    }
                ]
            }
        },
        "/facturacion/{claveAcceso}/anular": {
            "post": {
                "tags": [
                    "Facturación"
                ],
                "summary": "Anular factura",
                "description": "Anula una factura existente",
                "operationId": "anularFactura",
                "parameters": [
                    {
                        "name": "claveAcceso",
                        "in": "path",
                        "description": "Clave de acceso de la factura a anular",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "motivo"
                                ],
                                "properties": {
                                    "motivo": {
                                        "type": "string",
                                        "maxLength": 300,
                                        "minLength": 10,
                                        "example": "Anulación solicitada por el cliente"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Factura anulada exitosamente"
                    },
                    "422": {
                        "description": "No se puede anular la factura"
                    }
                },
                "security": [
                    {
                        "oauth2": [
                            "admin",
                            "user",
                            "desarrollo",
                            "produccion"
                        ]
                    }
                ]
            }
        },
        "/api/facturacion/{claveAcceso}/xml": {
            "get": {
                "tags": [
                    "Facturación"
                ],
                "summary": "Descargar XML de la factura",
                "description": "Genera y descarga el XML de una factura",
                "operationId": "descargarXML",
                "parameters": [
                    {
                        "name": "claveAcceso",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "XML de la factura",
                        "content": {
                            "application/xml": {}
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/facturacion/{claveAcceso}/estado-sri": {
            "get": {
                "tags": [
                    "Facturación"
                ],
                "summary": "Consultar estado en SRI",
                "description": "Consulta el estado de una factura en el SRI",
                "operationId": "consultarEstadoSRI",
                "parameters": [
                    {
                        "name": "claveAcceso",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Estado de la factura en el SRI"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/guias-remision": {
            "post": {
                "tags": [
                    "Guías de Remisión"
                ],
                "summary": "Crear guía de remisión",
                "description": "Crea una nueva guía de remisión electrónica",
                "operationId": "crearGuiaRemision",
                "requestBody": {
                    "description": "Datos de la guía de remisión",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "empresa_id",
                                    "establecimiento_id",
                                    "punto_emision_id",
                                    "ambiente",
                                    "tipo_emision",
                                    "fecha_ini_transporte",
                                    "fecha_fin_transporte",
                                    "transportista",
                                    "dir_partida",
                                    "destinatarios"
                                ],
                                "properties": {
                                    "empresa_id": {
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "establecimiento_id": {
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "punto_emision_id": {
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "ambiente": {
                                        "description": "1: Pruebas, 2: Producción",
                                        "type": "string",
                                        "enum": [
                                            "1",
                                            "2"
                                        ],
                                        "example": "1"
                                    },
                                    "tipo_emision": {
                                        "description": "1: Normal",
                                        "type": "string",
                                        "enum": [
                                            "1"
                                        ],
                                        "example": "1"
                                    },
                                    "fecha_ini_transporte": {
                                        "type": "string",
                                        "format": "date",
                                        "example": "2024-03-15"
                                    },
                                    "fecha_fin_transporte": {
                                        "type": "string",
                                        "format": "date",
                                        "example": "2024-03-16"
                                    },
                                    "transportista": {
                                        "required": [
                                            "tipo_identificacion",
                                            "identificacion",
                                            "razon_social",
                                            "placa"
                                        ],
                                        "properties": {
                                            "tipo_identificacion": {
                                                "type": "string",
                                                "enum": [
                                                    "04",
                                                    "05",
                                                    "06",
                                                    "07",
                                                    "08"
                                                ],
                                                "example": "04"
                                            },
                                            "identificacion": {
                                                "type": "string",
                                                "example": "0992877878001"
                                            },
                                            "razon_social": {
                                                "type": "string",
                                                "example": "TRANSPORTES EXPRESO S.A."
                                            },
                                            "placa": {
                                                "type": "string",
                                                "example": "ABC-1234"
                                            }
                                        },
                                        "type": "object"
                                    },
                                    "dir_partida": {
                                        "type": "string",
                                        "example": "Av. Principal 123, Quito"
                                    },
                                    "destinatarios": {
                                        "type": "array",
                                        "items": {
                                            "required": [
                                                "identificacion",
                                                "razon_social",
                                                "direccion",
                                                "motivo_traslado",
                                                "detalles"
                                            ],
                                            "properties": {
                                                "identificacion": {
                                                    "type": "string",
                                                    "example": "1716849140001"
                                                },
                                                "razon_social": {
                                                    "type": "string",
                                                    "example": "EMPRESA DESTINO S.A."
                                                },
                                                "direccion": {
                                                    "type": "string",
                                                    "example": "Av. 10 de Agosto y Colón, Guayaquil"
                                                },
                                                "email": {
                                                    "type": "string",
                                                    "example": "correo@correo.com"
                                                },
                                                "motivo_traslado": {
                                                    "type": "string",
                                                    "example": "Traslado de mercadería para venta"
                                                },
                                                "doc_aduanero": {
                                                    "type": "string",
                                                    "example": "12345678"
                                                },
                                                "cod_establecimiento_destino": {
                                                    "type": "string",
                                                    "example": "001"
                                                },
                                                "ruta": {
                                                    "type": "string",
                                                    "example": "Quito - Ambato - Guayaquil"
                                                },
                                                "doc_sustento": {
                                                    "properties": {
                                                        "tipo": {
                                                            "type": "string",
                                                            "enum": [
                                                                "01",
                                                                "03",
                                                                "04",
                                                                "05",
                                                                "06",
                                                                "07"
                                                            ],
                                                            "example": "01"
                                                        },
                                                        "numero": {
                                                            "type": "string",
                                                            "example": "001-001-000000001"
                                                        },
                                                        "autorizacion": {
                                                            "type": "string",
                                                            "example": "1234567890"
                                                        },
                                                        "fecha_emision": {
                                                            "type": "string",
                                                            "format": "date",
                                                            "example": "2024-03-14"
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "detalles": {
                                                    "type": "array",
                                                    "items": {
                                                        "required": [
                                                            "descripcion",
                                                            "cantidad"
                                                        ],
                                                        "properties": {
                                                            "codigo_interno": {
                                                                "type": "string",
                                                                "example": "PROD001"
                                                            },
                                                            "codigo_adicional": {
                                                                "type": "string",
                                                                "example": "AUX001"
                                                            },
                                                            "descripcion": {
                                                                "type": "string",
                                                                "example": "Producto de ejemplo"
                                                            },
                                                            "cantidad": {
                                                                "type": "number",
                                                                "example": 10.5
                                                            },
                                                            "detalles_adicionales": {
                                                                "type": "array",
                                                                "items": {
                                                                    "required": [
                                                                        "nombre",
                                                                        "valor"
                                                                    ],
                                                                    "properties": {
                                                                        "nombre": {
                                                                            "type": "string",
                                                                            "example": "Marca"
                                                                        },
                                                                        "valor": {
                                                                            "type": "string",
                                                                            "example": "XYZ"
                                                                        }
                                                                    },
                                                                    "type": "object"
                                                                }
                                                            }
                                                        },
                                                        "type": "object"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "info_adicional": {
                                        "type": "array",
                                        "items": {
                                            "required": [
                                                "nombre",
                                                "valor"
                                            ],
                                            "properties": {
                                                "nombre": {
                                                    "type": "string",
                                                    "example": "Teléfono"
                                                },
                                                "valor": {
                                                    "type": "string",
                                                    "example": "0991234567"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Guía de remisión creada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Guía de remisión creada exitosamente"
                                        },
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "clave_acceso": {
                                                    "type": "string",
                                                    "example": "1203202301099287787800110010010000000011234567818"
                                                },
                                                "numero": {
                                                    "type": "string",
                                                    "example": "001-001-000000001"
                                                },
                                                "estado": {
                                                    "type": "string",
                                                    "example": "CREADA"
                                                },
                                                "url_pdf": {
                                                    "type": "string",
                                                    "format": "uri"
                                                },
                                                "url_xml": {
                                                    "type": "string",
                                                    "format": "uri"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Error en los datos de entrada"
                    },
                    "422": {
                        "description": "Error de validación"
                    }
                },
                "security": [
                    {
                        "oauth2": []
                    }
                ]
            }
        },
        "/guias-remision/{claveAcceso}": {
            "get": {
                "tags": [
                    "Guías de Remisión"
                ],
                "summary": "Obtener guía de remisión",
                "description": "Obtiene el detalle de una guía de remisión por su clave de acceso",
                "operationId": "obtenerGuiaRemision",
                "parameters": [
                    {
                        "name": "claveAcceso",
                        "in": "path",
                        "description": "Clave de acceso de la guía de remisión",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "pattern": "^[0-9]{49}$",
                            "example": "1203202301099287787800110010010000000011234567818"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Guía de remisión encontrada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "clave_acceso": {
                                                    "type": "string"
                                                },
                                                "estado": {
                                                    "type": "string"
                                                },
                                                "transportista": {
                                                    "type": "object"
                                                },
                                                "destinatarios": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object"
                                                    }
                                                },
                                                "estados": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Guía de remisión no encontrada"
                    }
                },
                "security": [
                    {
                        "oauth2": [
                            "admin",
                            "user",
                            "desarrollo",
                            "produccion"
                        ]
                    }
                ]
            }
        },
        "/guias-remision/{claveAcceso}/pdf-download": {
            "get": {
                "tags": [
                    "Guías de Remisión"
                ],
                "summary": "Descargar PDF",
                "description": "Descarga el PDF de una Guia de Remision",
                "operationId": "descargarPDFGuiaRemision",
                "parameters": [
                    {
                        "name": "claveAcceso",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "pattern": "^[0-9]{49}$"
                        }
                    },
                    {
                        "name": "formato",
                        "in": "query",
                        "description": "Formato de respuesta: 'base64', 'binario' o 'url'",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "default": "base64",
                            "enum": [
                                "base64",
                                "binario",
                                "url"
                            ]
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "RIDE obtenido exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "base64": {
                                            "description": "Contenido del PDF en base64 (solo si formato=base64)",
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            },
                            "application/pdf": {
                                "schema": {
                                    "type": "string",
                                    "format": "binary"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Documento no encontrado o en proceso de generación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "mensaje": {
                                            "type": "string",
                                            "example": "RIDE EN PROCESO DE GENERACIÓN"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error al obtener el archivo",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "mensaje": {
                                            "type": "string",
                                            "example": "Error al obtener el archivo"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "oauth2": [
                            "admin",
                            "user",
                            "desarrollo",
                            "produccion"
                        ]
                    }
                ]
            }
        },
        "/guias-remision/{claveAcceso}/xml": {
            "get": {
                "tags": [
                    "Guías de Remisión"
                ],
                "summary": "Descargar XML",
                "description": "Descarga el XML de una Guía de Remisión",
                "operationId": "descargarXMLGuiaRemision",
                "parameters": [
                    {
                        "name": "claveAcceso",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "pattern": "^[0-9]{49}$"
                        }
                    },
                    {
                        "name": "formato",
                        "in": "query",
                        "description": "Formato de respuesta: 'base64', 'binario' o 'url'",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "default": "base64",
                            "enum": [
                                "base64",
                                "binario",
                                "url"
                            ]
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "XML obtenido exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "base64": {
                                            "description": "Contenido del XML en base64 (solo si formato=base64)",
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            },
                            "application/xml": {
                                "schema": {
                                    "type": "string",
                                    "format": "binary"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Documento no encontrado o en proceso de generación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "mensaje": {
                                            "type": "string",
                                            "example": "XML EN PROCESO DE GENERACIÓN"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error al obtener el archivo",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "mensaje": {
                                            "type": "string",
                                            "example": "Error al obtener el archivo"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "oauth2": [
                            "admin",
                            "user",
                            "desarrollo",
                            "produccion"
                        ]
                    }
                ]
            }
        },
        "/guias-remision/{claveAcceso}/anular": {
            "post": {
                "tags": [
                    "Guías de Remisión"
                ],
                "summary": "Anular guía de remisión",
                "description": "Anula una guía de remisión existente",
                "operationId": "anularGuiaRemision",
                "parameters": [
                    {
                        "name": "claveAcceso",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "pattern": "^[0-9]{49}$"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "motivo"
                                ],
                                "properties": {
                                    "motivo": {
                                        "type": "string",
                                        "minLength": 10,
                                        "example": "Anulación solicitada por el emisor"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Guía de remisión anulada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Guía de remisión anulada exitosamente"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Guía de remisión no encontrada"
                    },
                    "422": {
                        "description": "Error de validación"
                    }
                },
                "security": [
                    {
                        "oauth2": []
                    }
                ]
            }
        },
        "/liquidaciones-compra": {
            "post": {
                "tags": [
                    "Liquidaciones de Compra"
                ],
                "summary": "Crear liquidación de compra",
                "description": "Crea y procesa una nueva liquidación de compra electrónica según normativa SRI",
                "operationId": "crearLiquidacionCompra",
                "requestBody": {
                    "description": "Datos de la liquidación de compra",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "empresa_id",
                                    "establecimiento_id",
                                    "punto_emision_id",
                                    "ambiente",
                                    "tipo_emision",
                                    "version",
                                    "fecha_emision",
                                    "proveedor",
                                    "detalles"
                                ],
                                "properties": {
                                    "empresa_id": {
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "establecimiento_id": {
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "punto_emision_id": {
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "ambiente": {
                                        "description": "1: Pruebas, 2: Producción",
                                        "type": "string",
                                        "enum": [
                                            "1",
                                            "2"
                                        ],
                                        "example": "1"
                                    },
                                    "tipo_emision": {
                                        "description": "1: Normal",
                                        "type": "string",
                                        "enum": [
                                            "1"
                                        ],
                                        "example": "1"
                                    },
                                    "version": {
                                        "type": "string",
                                        "example": "1.0.0"
                                    },
                                    "fecha_emision": {
                                        "type": "string",
                                        "format": "date",
                                        "example": "2024-01-17"
                                    },
                                    "proveedor": {
                                        "required": [
                                            "tipo_identificacion",
                                            "identificacion",
                                            "razon_social",
                                            "direccion",
                                            "email",
                                            "tipo",
                                            "regimen"
                                        ],
                                        "properties": {
                                            "tipo_identificacion": {
                                                "description": "04=RUC, 05=CEDULA, 06=PASAPORTE, 07=CONSUMIDOR_FINAL, 08=IDENTIFICACION_EXTERIOR",
                                                "type": "string",
                                                "enum": [
                                                    "04",
                                                    "05",
                                                    "06",
                                                    "07",
                                                    "08"
                                                ],
                                                "example": "04"
                                            },
                                            "identificacion": {
                                                "type": "string",
                                                "example": "0921212121001"
                                            },
                                            "razon_social": {
                                                "type": "string",
                                                "example": "PROVEEDOR EJEMPLO S.A."
                                            },
                                            "direccion": {
                                                "type": "string",
                                                "example": "Guayaquil - Ecuador"
                                            },
                                            "email": {
                                                "type": "string",
                                                "format": "email",
                                                "example": "proveedor@ejemplo.com"
                                            },
                                            "telefono": {
                                                "type": "string",
                                                "format": "telefono",
                                                "example": "0909090909"
                                            },
                                            "tipo": {
                                                "type": "string",
                                                "enum": [
                                                    "sociedad",
                                                    "persona_natural"
                                                ],
                                                "example": "persona_natural"
                                            },
                                            "regimen": {
                                                "type": "string",
                                                "enum": [
                                                    "rimpe",
                                                    "general"
                                                ],
                                                "example": "rimpe"
                                            }
                                        },
                                        "type": "object"
                                    },
                                    "detalles": {
                                        "type": "array",
                                        "items": {
                                            "required": [
                                                "codigo_principal",
                                                "descripcion",
                                                "tipo_producto",
                                                "cantidad",
                                                "precio_unitario",
                                                "impuestos"
                                            ],
                                            "properties": {
                                                "codigo_principal": {
                                                    "type": "string",
                                                    "maxLength": 25,
                                                    "example": "PRD001"
                                                },
                                                "codigo_auxiliar": {
                                                    "type": "string",
                                                    "maxLength": 25,
                                                    "example": "AUX001"
                                                },
                                                "descripcion": {
                                                    "type": "string",
                                                    "maxLength": 300,
                                                    "example": "Producto de prueba"
                                                },
                                                "tipo_producto": {
                                                    "type": "string",
                                                    "enum": [
                                                        "NORMAL",
                                                        "MEDICINAS",
                                                        "CANASTA_BASICA",
                                                        "SERVICIOS_BASICOS",
                                                        "TURISMO",
                                                        "CONSTRUCCION",
                                                        "TRANSPORTE",
                                                        "EXPORTACION"
                                                    ],
                                                    "example": "NORMAL"
                                                },
                                                "cantidad": {
                                                    "type": "number",
                                                    "format": "float",
                                                    "maximum": 999999999.999999,
                                                    "minimum": 1.0e-6,
                                                    "example": 2
                                                },
                                                "precio_unitario": {
                                                    "type": "number",
                                                    "format": "float",
                                                    "maximum": 999999999.999999,
                                                    "minimum": 0,
                                                    "example": 100
                                                },
                                                "descuento": {
                                                    "type": "number",
                                                    "format": "float",
                                                    "maximum": 999999999.99,
                                                    "minimum": 0,
                                                    "example": 10
                                                },
                                                "impuestos": {
                                                    "type": "array",
                                                    "items": {
                                                        "required": [
                                                            "codigo",
                                                            "codigo_porcentaje",
                                                            "base_imponible",
                                                            "tarifa",
                                                            "valor"
                                                        ],
                                                        "properties": {
                                                            "codigo": {
                                                                "description": "Código SRI del impuesto según tipos_impuestos",
                                                                "type": "string",
                                                                "example": "02"
                                                            },
                                                            "codigo_porcentaje": {
                                                                "description": "Código SRI de la tarifa según tarifas_impuestos",
                                                                "type": "string",
                                                                "example": "4"
                                                            },
                                                            "base_imponible": {
                                                                "type": "number",
                                                                "format": "float",
                                                                "maximum": 999999999.99,
                                                                "minimum": 0,
                                                                "example": 190
                                                            },
                                                            "tarifa": {
                                                                "description": "Porcentaje de la tarifa del impuesto",
                                                                "type": "number",
                                                                "format": "float",
                                                                "example": 15
                                                            },
                                                            "valor": {
                                                                "type": "number",
                                                                "format": "float",
                                                                "maximum": 999999999.99,
                                                                "minimum": 0,
                                                                "example": 28.5
                                                            }
                                                        },
                                                        "type": "object"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "formas_pago": {
                                        "type": "array",
                                        "items": {
                                            "required": [
                                                "forma_pago",
                                                "total"
                                            ],
                                            "properties": {
                                                "forma_pago": {
                                                    "description": "01=Efectivo, 15=Compensación, 16=Tarjeta Débito, 17=Dinero Electrónico, 18=Tarjeta Prepago, 19=Tarjeta Crédito, 20=Otros, 21=Endoso de Títulos",
                                                    "type": "string",
                                                    "enum": [
                                                        "01",
                                                        "15",
                                                        "16",
                                                        "17",
                                                        "18",
                                                        "19",
                                                        "20",
                                                        "21"
                                                    ],
                                                    "example": "01"
                                                },
                                                "total": {
                                                    "type": "number",
                                                    "format": "float",
                                                    "maximum": 999999999.99,
                                                    "minimum": 0,
                                                    "example": 276
                                                },
                                                "plazo": {
                                                    "type": "integer",
                                                    "minimum": 0,
                                                    "example": 0
                                                },
                                                "unidad_tiempo": {
                                                    "type": "string",
                                                    "enum": [
                                                        "dias",
                                                        "meses"
                                                    ],
                                                    "example": "dias"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "info_adicional": {
                                        "type": "array",
                                        "items": {
                                            "required": [
                                                "nombre",
                                                "valor"
                                            ],
                                            "properties": {
                                                "nombre": {
                                                    "type": "string",
                                                    "maxLength": 300,
                                                    "example": "Referencia"
                                                },
                                                "valor": {
                                                    "type": "string",
                                                    "maxLength": 300,
                                                    "example": "Orden #123"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Liquidación de compra creada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Liquidación de compra creada exitosamente"
                                        },
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "codDoc": {
                                                    "type": "string",
                                                    "example": "03"
                                                },
                                                "version": {
                                                    "type": "string",
                                                    "example": "1.0.0"
                                                },
                                                "clave_acceso": {
                                                    "type": "string",
                                                    "example": "2311202301099287787800110010010000000011234567813"
                                                },
                                                "numero": {
                                                    "type": "string",
                                                    "example": "001-001-000000001"
                                                },
                                                "estado": {
                                                    "type": "string",
                                                    "enum": [
                                                        "CREADA",
                                                        "FIRMADA",
                                                        "ENVIADA",
                                                        "AUTORIZADA",
                                                        "RECHAZADA",
                                                        "ANULADA"
                                                    ],
                                                    "example": "CREADA"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "oauth2": []
                    }
                ]
            }
        },
        "/liquidaciones-compra/{claveAcceso}": {
            "get": {
                "tags": [
                    "Liquidaciones de Compra"
                ],
                "summary": "Consultar liquidación de compra por clave de acceso",
                "description": "Obtiene el detalle completo de una liquidación de compra usando su clave de acceso. La clave debe contener exactamente 49 dígitos numéricos.",
                "operationId": "consultarLiquidacionCompra",
                "parameters": [
                    {
                        "name": "claveAcceso",
                        "in": "path",
                        "description": "Clave de acceso de la liquidación (49 dígitos numéricos)",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "pattern": "^[0-9]{49}$",
                            "example": "2311202301099287787800110010010000000011234567813"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Liquidación encontrada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "liquidacion": {
                                                    "properties": {
                                                        "id": {
                                                            "type": "integer",
                                                            "example": 1
                                                        },
                                                        "clave_acceso": {
                                                            "type": "string",
                                                            "example": "2311202301099287787800110010010000000011234567813"
                                                        },
                                                        "estado": {
                                                            "type": "string",
                                                            "enum": [
                                                                "CREADA",
                                                                "FIRMADA",
                                                                "ENVIADA",
                                                                "AUTORIZADA",
                                                                "RECHAZADA",
                                                                "ANULADA"
                                                            ],
                                                            "example": "AUTORIZADA"
                                                        },
                                                        "fecha_emision": {
                                                            "type": "string",
                                                            "format": "date",
                                                            "example": "2023-11-20"
                                                        },
                                                        "razon_social_proveedor": {
                                                            "type": "string",
                                                            "example": "PROVEEDOR EJEMPLO S.A."
                                                        },
                                                        "identificacion_proveedor": {
                                                            "type": "string",
                                                            "example": "0992877878001"
                                                        },
                                                        "total_sin_impuestos": {
                                                            "type": "number",
                                                            "format": "float",
                                                            "example": 100
                                                        },
                                                        "total_descuento": {
                                                            "type": "number",
                                                            "format": "float",
                                                            "example": 0
                                                        },
                                                        "total_impuestos": {
                                                            "type": "number",
                                                            "format": "float",
                                                            "example": 15
                                                        },
                                                        "importe_total": {
                                                            "type": "number",
                                                            "format": "float",
                                                            "example": 115
                                                        },
                                                        "detalles": {
                                                            "type": "array",
                                                            "items": {
                                                                "properties": {
                                                                    "id": {
                                                                        "type": "integer",
                                                                        "example": 1
                                                                    },
                                                                    "codigo_principal": {
                                                                        "type": "string",
                                                                        "example": "PRD001"
                                                                    },
                                                                    "descripcion": {
                                                                        "type": "string",
                                                                        "example": "Producto o servicio de prueba"
                                                                    },
                                                                    "cantidad": {
                                                                        "type": "number",
                                                                        "format": "float",
                                                                        "example": 1
                                                                    },
                                                                    "precio_unitario": {
                                                                        "type": "number",
                                                                        "format": "float",
                                                                        "example": 100
                                                                    },
                                                                    "descuento": {
                                                                        "type": "number",
                                                                        "format": "float",
                                                                        "example": 0
                                                                    },
                                                                    "precio_total_sin_impuesto": {
                                                                        "type": "number",
                                                                        "format": "float",
                                                                        "example": 100
                                                                    },
                                                                    "impuestos": {
                                                                        "type": "array",
                                                                        "items": {
                                                                            "properties": {
                                                                                "codigo": {
                                                                                    "type": "string",
                                                                                    "example": "2"
                                                                                },
                                                                                "codigo_porcentaje": {
                                                                                    "type": "string",
                                                                                    "example": "2"
                                                                                },
                                                                                "tarifa": {
                                                                                    "type": "number",
                                                                                    "example": 15
                                                                                },
                                                                                "base_imponible": {
                                                                                    "type": "number",
                                                                                    "example": 100
                                                                                },
                                                                                "valor": {
                                                                                    "type": "number",
                                                                                    "example": 15
                                                                                }
                                                                            },
                                                                            "type": "object"
                                                                        }
                                                                    }
                                                                },
                                                                "type": "object"
                                                            }
                                                        },
                                                        "retenciones": {
                                                            "type": "array",
                                                            "items": {
                                                                "properties": {
                                                                    "codigo": {
                                                                        "type": "string",
                                                                        "example": "1"
                                                                    },
                                                                    "codigo_porcentaje": {
                                                                        "type": "string",
                                                                        "example": "344"
                                                                    },
                                                                    "porcentaje": {
                                                                        "type": "number",
                                                                        "example": 2
                                                                    },
                                                                    "base_imponible": {
                                                                        "type": "number",
                                                                        "example": 100
                                                                    },
                                                                    "valor_retenido": {
                                                                        "type": "number",
                                                                        "example": 2
                                                                    }
                                                                },
                                                                "type": "object"
                                                            }
                                                        },
                                                        "estados": {
                                                            "type": "array",
                                                            "items": {
                                                                "properties": {
                                                                    "estado_actual": {
                                                                        "type": "string",
                                                                        "example": "AUTORIZADA"
                                                                    },
                                                                    "fecha": {
                                                                        "type": "string",
                                                                        "format": "date-time"
                                                                    },
                                                                    "usuario": {
                                                                        "type": "string",
                                                                        "example": "Sistema"
                                                                    }
                                                                },
                                                                "type": "object"
                                                            }
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Formato de clave de acceso inválido",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "La clave de acceso debe contener exactamente 49 dígitos numéricos"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Liquidación no encontrada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Error al consultar la liquidación de compra"
                                        },
                                        "error": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Error interno del servidor"
                                        },
                                        "error": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "oauth2": [
                            "admin",
                            "user",
                            "desarrollo",
                            "produccion"
                        ]
                    }
                ]
            }
        },
        "/liquidaciones-compra/{claveAcceso}/pdf-download": {
            "get": {
                "tags": [
                    "Liquidaciones de Compra"
                ],
                "summary": "Descargar PDF",
                "description": "Descarga el PDF de una Liquidacion de Compra",
                "operationId": "descargarPDFLiquidacionCompra",
                "parameters": [
                    {
                        "name": "claveAcceso",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "pattern": "^[0-9]{49}$"
                        }
                    },
                    {
                        "name": "formato",
                        "in": "query",
                        "description": "Formato de respuesta: 'base64', 'binario' o 'url'",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "default": "base64",
                            "enum": [
                                "base64",
                                "binario",
                                "url"
                            ]
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "RIDE obtenido exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "base64": {
                                            "description": "Contenido del PDF en base64 (solo si formato=base64)",
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            },
                            "application/pdf": {
                                "schema": {
                                    "type": "string",
                                    "format": "binary"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Documento no encontrado o en proceso de generación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "mensaje": {
                                            "type": "string",
                                            "example": "RIDE EN PROCESO DE GENERACIÓN"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error al obtener el archivo",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "mensaje": {
                                            "type": "string",
                                            "example": "Error al obtener el archivo"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "oauth2": [
                            "admin",
                            "user",
                            "desarrollo",
                            "produccion"
                        ]
                    }
                ]
            }
        },
        "/liquidaciones-compra/{claveAcceso}/xml": {
            "get": {
                "tags": [
                    "Liquidaciones de Compra"
                ],
                "summary": "Descargar XML",
                "description": "Descarga el XML de una Liquidación de Compra",
                "operationId": "descargarXMLLiquidacionCompra",
                "parameters": [
                    {
                        "name": "claveAcceso",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "pattern": "^[0-9]{49}$"
                        }
                    },
                    {
                        "name": "formato",
                        "in": "query",
                        "description": "Formato de respuesta: 'base64', 'binario' o 'url'",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "default": "base64",
                            "enum": [
                                "base64",
                                "binario",
                                "url"
                            ]
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "XML obtenido exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "base64": {
                                            "description": "Contenido del XML en base64 (solo si formato=base64)",
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            },
                            "application/xml": {
                                "schema": {
                                    "type": "string",
                                    "format": "binary"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Documento no encontrado o en proceso de generación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "mensaje": {
                                            "type": "string",
                                            "example": "XML EN PROCESO DE GENERACIÓN"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error al obtener el archivo",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "mensaje": {
                                            "type": "string",
                                            "example": "Error al obtener el archivo"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "oauth2": [
                            "admin",
                            "user",
                            "desarrollo",
                            "produccion"
                        ]
                    }
                ]
            }
        },
        "/liquidaciones-compra/{claveAcceso}/anular": {
            "post": {
                "tags": [
                    "Liquidaciones de Compra"
                ],
                "summary": "Anular liquidación de compra",
                "description": "Anula una liquidación de compra existente. Solo se pueden anular liquidaciones en estado CREADA o AUTORIZADA. La anulación debe incluir un motivo detallado.",
                "operationId": "anularLiquidacionCompra",
                "parameters": [
                    {
                        "name": "claveAcceso",
                        "in": "path",
                        "description": "Clave de acceso de la liquidación a anular (49 dígitos numéricos)",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "pattern": "^[0-9]{49}$",
                            "example": "2311202301099287787800110010010000000011234567813"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "motivo"
                                ],
                                "properties": {
                                    "motivo": {
                                        "description": "Motivo detallado de la anulación",
                                        "type": "string",
                                        "maxLength": 300,
                                        "minLength": 10,
                                        "example": "Datos incorrectos del proveedor registrados en el documento"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Liquidación anulada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Liquidación anulada exitosamente"
                                        },
                                        "data": {
                                            "properties": {
                                                "estado": {
                                                    "type": "string",
                                                    "example": "ANULADA"
                                                },
                                                "fecha_anulacion": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": "2024-01-19T14:30:00-05:00"
                                                },
                                                "motivo": {
                                                    "type": "string",
                                                    "example": "Datos incorrectos del proveedor registrados en el documento"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Error de validación en la clave de acceso",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "La clave de acceso debe contener exactamente 49 dígitos numéricos"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Liquidación no encontrada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Liquidación no encontrada"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación o liquidación no anulable",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "No se puede anular la liquidación"
                                        },
                                        "error": {
                                            "type": "string",
                                            "example": "La liquidación solo puede ser anulada en estado CREADA o AUTORIZADA"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Error al anular la liquidación de compra"
                                        },
                                        "error": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "oauth2": [
                            "admin"
                        ]
                    }
                ]
            }
        },
        "/notas-credito/externa": {
            "post": {
                "tags": [
                    "Notas de Crédito"
                ],
                "summary": "Crear nota de crédito externa",
                "description": "Crea una nota de crédito para una factura no emitida en el sistema",
                "operationId": "crearNotaCreditoExterna",
                "requestBody": {
                    "description": "Datos de la nota de crédito",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "ambiente",
                                    "tipo_emision",
                                    "fecha_emision",
                                    "comprador",
                                    "doc_modificado",
                                    "detalles"
                                ],
                                "properties": {
                                    "empresa_id": {
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "establecimiento_id": {
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "punto_emision_id": {
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "ambiente": {
                                        "description": "1: Pruebas, 2: Producción",
                                        "type": "string",
                                        "enum": [
                                            "1",
                                            "2"
                                        ],
                                        "example": "1"
                                    },
                                    "tipo_emision": {
                                        "description": "1: Normal",
                                        "type": "string",
                                        "enum": [
                                            "1"
                                        ],
                                        "example": "1"
                                    },
                                    "fecha_emision": {
                                        "type": "string",
                                        "format": "date",
                                        "example": "2024-12-23"
                                    },
                                    "comprador": {
                                        "required": [
                                            "tipo_identificacion",
                                            "identificacion",
                                            "razon_social",
                                            "direccion",
                                            "email"
                                        ],
                                        "properties": {
                                            "tipo_identificacion": {
                                                "type": "string",
                                                "enum": [
                                                    "04",
                                                    "05",
                                                    "06",
                                                    "07",
                                                    "08"
                                                ],
                                                "example": "04"
                                            },
                                            "identificacion": {
                                                "type": "string",
                                                "example": "0992877878001"
                                            },
                                            "razon_social": {
                                                "type": "string",
                                                "example": "EMPRESA EJEMPLO S.A."
                                            },
                                            "direccion": {
                                                "type": "string",
                                                "example": "Guayaquil - Ecuador"
                                            },
                                            "email": {
                                                "type": "string",
                                                "format": "email",
                                                "example": "ejemplo@mail.com"
                                            }
                                        },
                                        "type": "object"
                                    },
                                    "doc_modificado": {
                                        "required": [
                                            "tipo_doc",
                                            "fecha_emision",
                                            "numero",
                                            "motivo"
                                        ],
                                        "properties": {
                                            "tipo_doc": {
                                                "type": "string",
                                                "enum": [
                                                    "01"
                                                ],
                                                "example": "01"
                                            },
                                            "fecha_emision": {
                                                "type": "string",
                                                "format": "date",
                                                "example": "2024-12-20"
                                            },
                                            "numero": {
                                                "type": "string",
                                                "example": "001-001-000000001"
                                            },
                                            "motivo": {
                                                "type": "string",
                                                "example": "Devolución de mercadería"
                                            }
                                        },
                                        "type": "object"
                                    },
                                    "detalles": {
                                        "type": "array",
                                        "items": {
                                            "required": [
                                                "codigo_principal",
                                                "descripcion",
                                                "cantidad",
                                                "precio_unitario",
                                                "impuestos"
                                            ],
                                            "properties": {
                                                "codigo_principal": {
                                                    "type": "string",
                                                    "example": "001"
                                                },
                                                "codigo_auxiliar": {
                                                    "type": "string",
                                                    "example": "AUX001"
                                                },
                                                "tipo_producto": {
                                                    "type": "string",
                                                    "example": "NORMAL"
                                                },
                                                "descripcion": {
                                                    "type": "string",
                                                    "example": "Producto de prueba"
                                                },
                                                "cantidad": {
                                                    "type": "number",
                                                    "format": "float",
                                                    "example": 1
                                                },
                                                "precio_unitario": {
                                                    "type": "number",
                                                    "format": "float",
                                                    "example": 100
                                                },
                                                "descuento": {
                                                    "type": "number",
                                                    "format": "float",
                                                    "example": 0
                                                },
                                                "impuestos": {
                                                    "type": "array",
                                                    "items": {
                                                        "required": [
                                                            "codigo",
                                                            "codigo_porcentaje",
                                                            "base_imponible",
                                                            "valor"
                                                        ],
                                                        "properties": {
                                                            "codigo": {
                                                                "type": "string",
                                                                "example": "02"
                                                            },
                                                            "codigo_porcentaje": {
                                                                "type": "string",
                                                                "example": "4"
                                                            },
                                                            "tarifa": {
                                                                "type": "number",
                                                                "example": 15
                                                            },
                                                            "base_imponible": {
                                                                "type": "number",
                                                                "example": 100
                                                            },
                                                            "valor": {
                                                                "type": "number",
                                                                "example": 15
                                                            }
                                                        },
                                                        "type": "object"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Nota de crédito creada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Nota de crédito creada exitosamente"
                                        },
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "clave_acceso": {
                                                    "type": "string",
                                                    "example": "2311202301099287787800110010010000000011234567813"
                                                },
                                                "numero": {
                                                    "type": "string",
                                                    "example": "001-001-000000001"
                                                },
                                                "estado": {
                                                    "type": "string",
                                                    "example": "CREADA"
                                                },
                                                "url_pdf": {
                                                    "type": "string",
                                                    "format": "uri"
                                                },
                                                "url_xml": {
                                                    "type": "string",
                                                    "format": "uri"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Error en los datos de entrada"
                    },
                    "422": {
                        "description": "Error de validación"
                    },
                    "500": {
                        "description": "Error interno del servidor"
                    }
                },
                "security": [
                    {
                        "oauth2": [
                            "admin",
                            "user",
                            "desarrollo",
                            "produccion"
                        ]
                    }
                ]
            }
        },
        "/notas-credito/interna": {
            "post": {
                "tags": [
                    "Notas de Crédito"
                ],
                "summary": "Crear nota de crédito interna",
                "description": "Crea una nota de crédito para una factura emitida en el sistema",
                "operationId": "crearNotaCreditoInterna",
                "requestBody": {
                    "description": "Datos de la nota de crédito",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "factura_id",
                                    "tipo_aplicacion",
                                    "detalles"
                                ],
                                "properties": {
                                    "factura_id": {
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "tipo_aplicacion": {
                                        "type": "string",
                                        "enum": [
                                            "TOTAL",
                                            "PARCIAL"
                                        ],
                                        "example": "PARCIAL"
                                    },
                                    "motivo_general": {
                                        "type": "string",
                                        "example": "Devolución parcial de mercadería"
                                    },
                                    "detalles": {
                                        "type": "array",
                                        "items": {
                                            "required": [
                                                "factura_detalle_id",
                                                "cantidad_devuelta",
                                                "motivo"
                                            ],
                                            "properties": {
                                                "factura_detalle_id": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "cantidad_devuelta": {
                                                    "type": "number",
                                                    "format": "float",
                                                    "example": 1
                                                },
                                                "motivo": {
                                                    "type": "string",
                                                    "example": "Producto en mal estado"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Nota de crédito creada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Nota de crédito creada exitosamente"
                                        },
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "clave_acceso": {
                                                    "type": "string"
                                                },
                                                "numero": {
                                                    "type": "string"
                                                },
                                                "estado": {
                                                    "type": "string"
                                                },
                                                "tipo_aplicacion": {
                                                    "type": "string"
                                                },
                                                "url_pdf": {
                                                    "type": "string"
                                                },
                                                "url_xml": {
                                                    "type": "string"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Error en los datos de entrada"
                    },
                    "422": {
                        "description": "Error de validación"
                    },
                    "500": {
                        "description": "Error interno del servidor"
                    }
                },
                "security": [
                    {
                        "oauth2": []
                    }
                ]
            }
        },
        "/notas-credito/{claveAcceso}": {
            "get": {
                "tags": [
                    "Notas de Crédito"
                ],
                "summary": "Obtener nota de crédito",
                "description": "Obtiene el detalle de una nota de crédito por su clave de acceso",
                "operationId": "obtenerNotaCredito",
                "parameters": [
                    {
                        "name": "claveAcceso",
                        "in": "path",
                        "description": "Clave de acceso de la nota de crédito",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "pattern": "^[0-9]{49}$",
                            "example": "2311202301099287787800110010010000000011234567813"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Nota de crédito encontrada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "clave_acceso": {
                                                    "type": "string"
                                                },
                                                "estado": {
                                                    "type": "string"
                                                },
                                                "tipo_aplicacion": {
                                                    "type": "string"
                                                },
                                                "detalles": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object"
                                                    }
                                                },
                                                "estados": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Nota de crédito no encontrada"
                    }
                },
                "security": [
                    {
                        "oauth2": []
                    }
                ]
            }
        },
        "/notas-credito/{claveAcceso}/anular": {
            "post": {
                "tags": [
                    "Notas de Crédito"
                ],
                "summary": "Anular nota de credito",
                "description": "Anula una nota de credito existente",
                "operationId": "anularNotaCredito",
                "parameters": [
                    {
                        "name": "claveAcceso",
                        "in": "path",
                        "description": "Clave de acceso de la nota de credito a anular",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "motivo"
                                ],
                                "properties": {
                                    "motivo": {
                                        "type": "string",
                                        "maxLength": 300,
                                        "minLength": 10,
                                        "example": "Anulación solicitada por el cliente"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Nota de Credito anulada exitosamente"
                    },
                    "422": {
                        "description": "No se puede anular la Nota de Credito"
                    }
                },
                "security": [
                    {
                        "oauth2": [
                            "admin",
                            "user",
                            "desarrollo",
                            "produccion"
                        ]
                    }
                ]
            }
        },
        "/notas-credito/{claveAcceso}/pdf-download": {
            "get": {
                "tags": [
                    "Notas de Crédito"
                ],
                "summary": "Descargar PDF",
                "description": "Descarga el PDF de una nota de credito",
                "operationId": "descargarPDFNotaCredito",
                "parameters": [
                    {
                        "name": "claveAcceso",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "pattern": "^[0-9]{49}$"
                        }
                    },
                    {
                        "name": "formato",
                        "in": "query",
                        "description": "Formato de respuesta: 'base64', 'binario' o 'url'",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "default": "base64",
                            "enum": [
                                "base64",
                                "binario",
                                "url"
                            ]
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "RIDE obtenido exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "base64": {
                                            "description": "Contenido del PDF en base64 (solo si formato=base64)",
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            },
                            "application/pdf": {
                                "schema": {
                                    "type": "string",
                                    "format": "binary"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Documento no encontrado o en proceso de generación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "mensaje": {
                                            "type": "string",
                                            "example": "RIDE EN PROCESO DE GENERACIÓN"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error al obtener el archivo",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "mensaje": {
                                            "type": "string",
                                            "example": "Error al obtener el archivo"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "oauth2": [
                            "admin",
                            "user",
                            "desarrollo",
                            "produccion"
                        ]
                    }
                ]
            }
        },
        "/notas-credito/{claveAcceso}/xml": {
            "get": {
                "tags": [
                    "Notas de Crédito"
                ],
                "summary": "Descargar XML",
                "description": "Descarga el XML de una nota de crédito",
                "operationId": "descargarXMLNotaCredito",
                "parameters": [
                    {
                        "name": "claveAcceso",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "pattern": "^[0-9]{49}$"
                        }
                    },
                    {
                        "name": "formato",
                        "in": "query",
                        "description": "Formato de respuesta: 'base64', 'binario' o 'url'",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "default": "base64",
                            "enum": [
                                "base64",
                                "binario",
                                "url"
                            ]
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "XML obtenido exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "base64": {
                                            "description": "Contenido del XML en base64 (solo si formato=base64)",
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            },
                            "application/xml": {
                                "schema": {
                                    "type": "string",
                                    "format": "binary"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Documento no encontrado o en proceso de generación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "mensaje": {
                                            "type": "string",
                                            "example": "XML EN PROCESO DE GENERACIÓN"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error al obtener el archivo",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "mensaje": {
                                            "type": "string",
                                            "example": "Error al obtener el archivo"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "oauth2": [
                            "admin",
                            "user",
                            "desarrollo",
                            "produccion"
                        ]
                    }
                ]
            }
        },
        "/retenciones/{id_empresa}": {
            "get": {
                "tags": [
                    "Retenciones"
                ],
                "summary": "Listar retenciones",
                "description": "Obtiene un listado paginado de retenciones con filtros opcionales",
                "operationId": "listarRetenciones",
                "parameters": [
                    {
                        "name": "id_empresa",
                        "in": "path",
                        "description": "Identificador único de la empresa",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "format": "int64"
                        }
                    },
                    {
                        "name": "fecha_desde",
                        "in": "query",
                        "description": "Fecha inicial (Y-m-d)",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "name": "fecha_hasta",
                        "in": "query",
                        "description": "Fecha final (Y-m-d)",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "name": "identificacion",
                        "in": "query",
                        "description": "Identificación del sujeto retenido",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "estado",
                        "in": "query",
                        "description": "Estado de la retención",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "CREADA",
                                "AUTORIZADA",
                                "ANULADA"
                            ]
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de retenciones",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "integer"
                                                    },
                                                    "empresa_id": {
                                                        "type": "integer"
                                                    },
                                                    "establecimiento_id": {
                                                        "type": "integer"
                                                    },
                                                    "punto_emision_id": {
                                                        "type": "integer"
                                                    },
                                                    "uuid": {
                                                        "type": "string"
                                                    },
                                                    "estado": {
                                                        "type": "string"
                                                    },
                                                    "ambiente": {
                                                        "type": "string"
                                                    },
                                                    "clave_acceso": {
                                                        "type": "string"
                                                    },
                                                    "fecha_emision": {
                                                        "type": "string",
                                                        "format": "date"
                                                    },
                                                    "periodo_fiscal": {
                                                        "type": "string"
                                                    },
                                                    "identificacion_sujeto": {
                                                        "type": "string"
                                                    },
                                                    "razon_social_sujeto": {
                                                        "type": "string"
                                                    },
                                                    "total_retenido": {
                                                        "type": "number",
                                                        "format": "float"
                                                    },
                                                    "created_at": {
                                                        "type": "string",
                                                        "format": "date-time"
                                                    },
                                                    "updated_at": {
                                                        "type": "string",
                                                        "format": "date-time"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        },
                                        "meta": {
                                            "properties": {
                                                "current_page": {
                                                    "type": "integer"
                                                },
                                                "from": {
                                                    "type": "integer"
                                                },
                                                "last_page": {
                                                    "type": "integer"
                                                },
                                                "per_page": {
                                                    "type": "integer"
                                                },
                                                "to": {
                                                    "type": "integer"
                                                },
                                                "total": {
                                                    "type": "integer"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Retenciones obtenidas exitosamente"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "No autorizado"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "No encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Empresa no encontrada"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "oauth2": [
                            "admin",
                            "user",
                            "desarrollo",
                            "produccion"
                        ]
                    }
                ]
            }
        },
        "/retenciones/codigos-retencion": {
            "get": {
                "tags": [
                    "Retenciones"
                ],
                "summary": "Listar códigos de retención",
                "description": "Obtiene el listado de códigos de retención activos con filtros opcionales",
                "operationId": "listarCodigosRetencion",
                "parameters": [
                    {
                        "name": "tipo_impuesto",
                        "in": "query",
                        "description": "Tipo de impuesto (IR, IV)",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "IR",
                                "IV"
                            ]
                        }
                    },
                    {
                        "name": "tipo_persona",
                        "in": "query",
                        "description": "Tipo de persona (natural, sociedad)",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "natural",
                                "sociedad"
                            ]
                        }
                    },
                    {
                        "name": "tipo_regimen",
                        "in": "query",
                        "description": "Tipo de régimen (rimpe, general)",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "rimpe",
                                "general"
                            ]
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de códigos de retención",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "tipo_impuesto": {
                                                        "type": "string",
                                                        "example": "IR"
                                                    },
                                                    "codigo": {
                                                        "type": "string",
                                                        "example": "303"
                                                    },
                                                    "concepto": {
                                                        "type": "string"
                                                    },
                                                    "porcentaje": {
                                                        "type": "number",
                                                        "format": "float"
                                                    },
                                                    "tipo_persona": {
                                                        "type": "string",
                                                        "enum": [
                                                            "natural",
                                                            "sociedad"
                                                        ]
                                                    },
                                                    "tipo_regimen": {
                                                        "type": "string",
                                                        "enum": [
                                                            "rimpe",
                                                            "general"
                                                        ]
                                                    },
                                                    "categoria": {
                                                        "type": "string"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        },
                                        "meta": {
                                            "properties": {
                                                "current_page": {
                                                    "type": "integer"
                                                },
                                                "total": {
                                                    "type": "integer"
                                                },
                                                "per_page": {
                                                    "type": "integer"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "oauth2": [
                            "admin",
                            "user",
                            "desarrollo",
                            "produccion"
                        ]
                    }
                ]
            }
        },
        "/retenciones/crear": {
            "post": {
                "tags": [
                    "Retenciones"
                ],
                "summary": "Crear retención",
                "description": "Crea una nueva retención en el sistema",
                "operationId": "crearRetencion",
                "requestBody": {
                    "description": "Datos de la Retencion",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "empresa_id",
                                    "establecimiento_id",
                                    "punto_emision_id",
                                    "ambiente",
                                    "tipo_emision",
                                    "fecha_emision",
                                    "periodo_fiscal",
                                    "sujeto",
                                    "detalles"
                                ],
                                "properties": {
                                    "empresa_id": {
                                        "type": "integer"
                                    },
                                    "establecimiento_id": {
                                        "type": "integer"
                                    },
                                    "punto_emision_id": {
                                        "type": "integer"
                                    },
                                    "ambiente": {
                                        "type": "string",
                                        "enum": [
                                            "1",
                                            "2"
                                        ]
                                    },
                                    "tipo_emision": {
                                        "type": "string",
                                        "enum": [
                                            "1"
                                        ]
                                    },
                                    "fecha_emision": {
                                        "type": "string",
                                        "format": "date"
                                    },
                                    "periodo_fiscal": {
                                        "type": "string",
                                        "example": "01/2025"
                                    },
                                    "sujeto": {
                                        "properties": {
                                            "tipo_identificacion": {
                                                "type": "string",
                                                "example": "04"
                                            },
                                            "identificacion": {
                                                "type": "string",
                                                "example": "0909090909001"
                                            },
                                            "razon_social": {
                                                "type": "string",
                                                "example": "EMPRESA MACROBILLS"
                                            },
                                            "direccion": {
                                                "type": "string",
                                                "example": "GUAYAQUIL - ECUADOR"
                                            },
                                            "email": {
                                                "type": "string",
                                                "example": "cliente@cliente.com"
                                            },
                                            "tipo_sujeto": {
                                                "type": "string",
                                                "enum": [
                                                    "persona_natural",
                                                    "sociedad"
                                                ]
                                            },
                                            "regimen": {
                                                "type": "string",
                                                "enum": [
                                                    "rimpe",
                                                    "general"
                                                ]
                                            }
                                        },
                                        "type": "object"
                                    },
                                    "detalles": {
                                        "type": "array",
                                        "items": {
                                            "required": [
                                                "tipo_impuesto",
                                                "codigo",
                                                "base_imponible",
                                                "doc_sustento"
                                            ],
                                            "properties": {
                                                "tipo_impuesto": {
                                                    "type": "string",
                                                    "example": "IR"
                                                },
                                                "codigo": {
                                                    "type": "string",
                                                    "example": "303"
                                                },
                                                "base_imponible": {
                                                    "type": "string",
                                                    "example": "100.00"
                                                },
                                                "doc_sustento": {
                                                    "properties": {
                                                        "codigo": {
                                                            "type": "string",
                                                            "example": "01"
                                                        },
                                                        "numero": {
                                                            "type": "string",
                                                            "example": "001-001-000000012"
                                                        },
                                                        "fecha_emision": {
                                                            "type": "string",
                                                            "format": "date"
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "info_adicional": {
                                        "type": "array",
                                        "items": {
                                            "required": [
                                                "nombre",
                                                "valor"
                                            ],
                                            "properties": {
                                                "nombre": {
                                                    "type": "string",
                                                    "example": "correo"
                                                },
                                                "valor": {
                                                    "type": "string",
                                                    "example": "correo@cliente.com"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Retencion creada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Retencion creada exitosamente"
                                        },
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "clave_acceso": {
                                                    "type": "string",
                                                    "example": "2311202301099287787800110010010000000011234567813"
                                                },
                                                "numero_retencion": {
                                                    "type": "string",
                                                    "example": "001-001-000000001"
                                                },
                                                "estado": {
                                                    "type": "string",
                                                    "enum": [
                                                        "CREADA",
                                                        "FIRMADA",
                                                        "ENVIADA",
                                                        "AUTORIZADA",
                                                        "RECHAZADA",
                                                        "ANULADA"
                                                    ],
                                                    "example": "CREADA"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación"
                    }
                },
                "security": [
                    {
                        "oauth2": [
                            "admin",
                            "user",
                            "desarrollo",
                            "produccion"
                        ]
                    }
                ]
            }
        },
        "/retenciones/{uuid}": {
            "get": {
                "tags": [
                    "Retenciones"
                ],
                "summary": "Obtener retención",
                "description": "Obtiene el detalle de una retención específica",
                "operationId": "obtenerRetencion",
                "parameters": [
                    {
                        "name": "uuid",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Retención encontrada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "integer"
                                                },
                                                "empresa_id": {
                                                    "type": "integer"
                                                },
                                                "establecimiento_id": {
                                                    "type": "integer"
                                                },
                                                "punto_emision_id": {
                                                    "type": "integer"
                                                },
                                                "uuid": {
                                                    "type": "string"
                                                },
                                                "estado": {
                                                    "type": "string"
                                                },
                                                "ambiente": {
                                                    "type": "string"
                                                },
                                                "clave_acceso": {
                                                    "type": "string"
                                                },
                                                "fecha_emision": {
                                                    "type": "string",
                                                    "format": "date"
                                                },
                                                "periodo_fiscal": {
                                                    "type": "string"
                                                },
                                                "identificacion_sujeto": {
                                                    "type": "string"
                                                },
                                                "razon_social_sujeto": {
                                                    "type": "string"
                                                },
                                                "total_retenido": {
                                                    "type": "number",
                                                    "format": "float"
                                                },
                                                "detalles": {
                                                    "type": "array",
                                                    "items": {
                                                        "properties": {
                                                            "id": {
                                                                "type": "integer"
                                                            },
                                                            "codigo_retencion_id": {
                                                                "type": "integer"
                                                            },
                                                            "base_imponible": {
                                                                "type": "number",
                                                                "format": "float"
                                                            },
                                                            "porcentaje_retener": {
                                                                "type": "number",
                                                                "format": "float"
                                                            },
                                                            "valor_retenido": {
                                                                "type": "number",
                                                                "format": "float"
                                                            }
                                                        },
                                                        "type": "object"
                                                    }
                                                },
                                                "estados": {
                                                    "type": "array",
                                                    "items": {
                                                        "properties": {
                                                            "estado": {
                                                                "type": "string"
                                                            },
                                                            "fecha": {
                                                                "type": "string",
                                                                "format": "date-time"
                                                            },
                                                            "usuario": {
                                                                "type": "string"
                                                            }
                                                        },
                                                        "type": "object"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Retención obtenida exitosamente"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Retención no encontrada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Retención no encontrada"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "oauth2": [
                            "admin",
                            "user",
                            "desarrollo",
                            "produccion"
                        ]
                    }
                ]
            }
        },
        "/retenciones/{uuid}/anular": {
            "post": {
                "tags": [
                    "Retenciones"
                ],
                "summary": "Anular retención",
                "description": "Anula una retención existente",
                "operationId": "anularRetencion",
                "parameters": [
                    {
                        "name": "uuid",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "motivo"
                                ],
                                "properties": {
                                    "motivo": {
                                        "type": "string",
                                        "minLength": 10,
                                        "example": "Anulación solicitada por el contribuyente"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Retención anulada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Retención anulada exitosamente"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Retención no encontrada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Retención no encontrada"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "No se puede anular la retención",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "No se puede anular la retención"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "oauth2": [
                            "admin",
                            "user",
                            "desarrollo",
                            "produccion"
                        ]
                    }
                ]
            }
        },
        "/retenciones/{claveAcceso}/pdf-download": {
            "get": {
                "tags": [
                    "Retenciones"
                ],
                "summary": "Descargar PDF",
                "description": "Descarga el PDF de una Retencion",
                "operationId": "descargarPDFRetencion",
                "parameters": [
                    {
                        "name": "claveAcceso",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "pattern": "^[0-9]{49}$"
                        }
                    },
                    {
                        "name": "formato",
                        "in": "query",
                        "description": "Formato de respuesta: 'base64', 'binario' o 'url'",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "default": "base64",
                            "enum": [
                                "base64",
                                "binario",
                                "url"
                            ]
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "RIDE obtenido exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "base64": {
                                            "description": "Contenido del PDF en base64 (solo si formato=base64)",
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            },
                            "application/pdf": {
                                "schema": {
                                    "type": "string",
                                    "format": "binary"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Documento no encontrado o en proceso de generación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "mensaje": {
                                            "type": "string",
                                            "example": "RIDE EN PROCESO DE GENERACIÓN"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error al obtener el archivo",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "mensaje": {
                                            "type": "string",
                                            "example": "Error al obtener el archivo"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "oauth2": [
                            "admin",
                            "user",
                            "desarrollo",
                            "produccion"
                        ]
                    }
                ]
            }
        },
        "/retenciones/{claveAcceso}/xml": {
            "get": {
                "tags": [
                    "Retenciones"
                ],
                "summary": "Descargar XML",
                "description": "Descarga el XML de una Retención",
                "operationId": "descargarXMLRetencion",
                "parameters": [
                    {
                        "name": "claveAcceso",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "pattern": "^[0-9]{49}$"
                        }
                    },
                    {
                        "name": "formato",
                        "in": "query",
                        "description": "Formato de respuesta: 'base64', 'binario' o 'url'",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "default": "base64",
                            "enum": [
                                "base64",
                                "binario",
                                "url"
                            ]
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "XML obtenido exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "base64": {
                                            "description": "Contenido del XML en base64 (solo si formato=base64)",
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            },
                            "application/xml": {
                                "schema": {
                                    "type": "string",
                                    "format": "binary"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Documento no encontrado o en proceso de generación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "mensaje": {
                                            "type": "string",
                                            "example": "XML EN PROCESO DE GENERACIÓN"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error al obtener el archivo",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "mensaje": {
                                            "type": "string",
                                            "example": "Error al obtener el archivo"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "oauth2": [
                            "admin",
                            "user",
                            "desarrollo",
                            "produccion"
                        ]
                    }
                ]
            }
        },
        "/empresas": {
            "get": {
                "tags": [
                    "Administracion"
                ],
                "summary": "Obtener listado de empresas",
                "description": "Retorna un listado paginado de empresas con filtros opcionales",
                "operationId": "getEmpresas",
                "parameters": [
                    {
                        "name": "ruc",
                        "in": "query",
                        "description": "Filtrar por RUC",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "razon_social",
                        "in": "query",
                        "description": "Filtrar por razón social",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "ambiente",
                        "in": "query",
                        "description": "Filtrar por ambiente",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "produccion",
                                "pruebas"
                            ]
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "Elementos por página",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 10
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Listado de empresas obtenido exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "integer",
                                                        "example": 1
                                                    },
                                                    "ruc": {
                                                        "type": "string",
                                                        "example": "0992877878001"
                                                    },
                                                    "razon_social": {
                                                        "type": "string",
                                                        "example": "EMPRESA EJEMPLO S.A."
                                                    },
                                                    "nombre_comercial": {
                                                        "type": "string",
                                                        "example": "EMPRESA EJEMPLO"
                                                    },
                                                    "direccion_matriz": {
                                                        "type": "string",
                                                        "example": "Guayaquil - Ecuador"
                                                    },
                                                    "obligado_contabilidad": {
                                                        "type": "boolean",
                                                        "example": true
                                                    },
                                                    "contribuyente_especial": {
                                                        "type": "string",
                                                        "example": "12345"
                                                    },
                                                    "ambiente": {
                                                        "type": "string",
                                                        "example": "produccion"
                                                    },
                                                    "tipo_emision": {
                                                        "type": "string",
                                                        "example": "normal"
                                                    },
                                                    "correos_notificacion": {
                                                        "type": "array",
                                                        "items": {
                                                            "type": "string"
                                                        }
                                                    },
                                                    "regimen_microempresas": {
                                                        "type": "boolean",
                                                        "example": false
                                                    },
                                                    "agente_retencion": {
                                                        "type": "string",
                                                        "example": "1"
                                                    },
                                                    "rimpe": {
                                                        "type": "boolean",
                                                        "example": false
                                                    },
                                                    "created_at": {
                                                        "type": "string",
                                                        "format": "datetime"
                                                    },
                                                    "updated_at": {
                                                        "type": "string",
                                                        "format": "datetime"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        },
                                        "links": {
                                            "type": "object"
                                        },
                                        "meta": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autorizado"
                    }
                },
                "security": [
                    {
                        "oauth2": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Empresa"
                ],
                "summary": "Crear una nueva empresa",
                "operationId": "93cc0c4b870149ece1db8173d3e4178c",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "ruc",
                                    "razon_social",
                                    "direccion_matriz",
                                    "obligado_contabilidad",
                                    "ambiente",
                                    "tipo_emision"
                                ],
                                "properties": {
                                    "ruc": {
                                        "type": "string",
                                        "example": "0992877878001"
                                    },
                                    "razon_social": {
                                        "type": "string",
                                        "example": "EMPRESA EJEMPLO S.A."
                                    },
                                    "nombre_comercial": {
                                        "type": "string",
                                        "example": "EMPRESA EJEMPLO"
                                    },
                                    "direccion_matriz": {
                                        "type": "string",
                                        "example": "Guayaquil - Ecuador"
                                    },
                                    "obligado_contabilidad": {
                                        "type": "boolean",
                                        "example": true
                                    },
                                    "contribuyente_especial": {
                                        "type": "string",
                                        "example": "12345"
                                    },
                                    "ambiente": {
                                        "type": "string",
                                        "enum": [
                                            "produccion",
                                            "pruebas"
                                        ],
                                        "example": "produccion"
                                    },
                                    "tipo_emision": {
                                        "type": "string",
                                        "enum": [
                                            "normal",
                                            "contingencia"
                                        ],
                                        "example": "normal"
                                    },
                                    "regimen_microempresas": {
                                        "type": "boolean",
                                        "example": false
                                    },
                                    "agente_retencion": {
                                        "type": "string",
                                        "example": "1"
                                    },
                                    "rimpe": {
                                        "type": "boolean",
                                        "example": false
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Empresa creada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "ruc": {
                                                    "type": "string",
                                                    "example": "0992877878001"
                                                },
                                                "razon_social": {
                                                    "type": "string",
                                                    "example": "EMPRESA EJEMPLO S.A."
                                                },
                                                "nombre_comercial": {
                                                    "type": "string",
                                                    "example": "EMPRESA EJEMPLO"
                                                },
                                                "direccion_matriz": {
                                                    "type": "string",
                                                    "example": "Guayaquil - Ecuador"
                                                },
                                                "obligado_contabilidad": {
                                                    "type": "boolean",
                                                    "example": true
                                                },
                                                "contribuyente_especial": {
                                                    "type": "string",
                                                    "example": "12345"
                                                },
                                                "ambiente": {
                                                    "type": "string",
                                                    "example": "produccion"
                                                },
                                                "tipo_emision": {
                                                    "type": "string",
                                                    "example": "normal"
                                                },
                                                "regimen_microempresas": {
                                                    "type": "boolean",
                                                    "example": false
                                                },
                                                "agente_retencion": {
                                                    "type": "string",
                                                    "example": "1"
                                                },
                                                "rimpe": {
                                                    "type": "boolean",
                                                    "example": false
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Los datos proporcionados no son válidos"
                                        },
                                        "errors": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "oauth2": []
                    }
                ]
            }
        },
        "/empresas/{id}": {
            "get": {
                "tags": [
                    "Empresa"
                ],
                "summary": "Obtener una empresa específica",
                "operationId": "dcd407e652a7c79071e9b2fbd46a873d",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID de la empresa",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Empresa encontrada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "ruc": {
                                                    "type": "string",
                                                    "example": "0992877878001"
                                                },
                                                "razon_social": {
                                                    "type": "string",
                                                    "example": "EMPRESA EJEMPLO S.A."
                                                },
                                                "nombre_comercial": {
                                                    "type": "string",
                                                    "example": "EMPRESA EJEMPLO"
                                                },
                                                "direccion_matriz": {
                                                    "type": "string",
                                                    "example": "Guayaquil - Ecuador"
                                                },
                                                "obligado_contabilidad": {
                                                    "type": "boolean",
                                                    "example": true
                                                },
                                                "contribuyente_especial": {
                                                    "type": "string",
                                                    "example": "12345"
                                                },
                                                "ambiente": {
                                                    "type": "string",
                                                    "example": "produccion"
                                                },
                                                "tipo_emision": {
                                                    "type": "string",
                                                    "example": "normal"
                                                },
                                                "regimen_microempresas": {
                                                    "type": "boolean",
                                                    "example": false
                                                },
                                                "agente_retencion": {
                                                    "type": "string",
                                                    "example": "1"
                                                },
                                                "rimpe": {
                                                    "type": "boolean",
                                                    "example": false
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Empresa no encontrada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Empresa no encontrada"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "oauth2": []
                    }
                ]
            },
            "put": {
                "tags": [
                    "Empresa"
                ],
                "summary": "Actualizar una empresa existente",
                "operationId": "7e9d6b1f0482575128a491826f5b39ba",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID de la empresa",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "razon_social": {
                                        "type": "string",
                                        "example": "EMPRESA EJEMPLO S.A."
                                    },
                                    "nombre_comercial": {
                                        "type": "string",
                                        "example": "EMPRESA EJEMPLO"
                                    },
                                    "direccion_matriz": {
                                        "type": "string",
                                        "example": "Guayaquil - Ecuador"
                                    },
                                    "obligado_contabilidad": {
                                        "type": "boolean",
                                        "example": true
                                    },
                                    "contribuyente_especial": {
                                        "type": "string",
                                        "example": "12345"
                                    },
                                    "ambiente": {
                                        "type": "string",
                                        "enum": [
                                            "produccion",
                                            "pruebas"
                                        ],
                                        "example": "produccion"
                                    },
                                    "tipo_emision": {
                                        "type": "string",
                                        "enum": [
                                            "normal",
                                            "contingencia"
                                        ],
                                        "example": "normal"
                                    },
                                    "regimen_microempresas": {
                                        "type": "boolean",
                                        "example": false
                                    },
                                    "agente_retencion": {
                                        "type": "string",
                                        "example": "1"
                                    },
                                    "rimpe": {
                                        "type": "boolean",
                                        "example": false
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Empresa actualizada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "ruc": {
                                                    "type": "string",
                                                    "example": "0992877878001"
                                                },
                                                "razon_social": {
                                                    "type": "string",
                                                    "example": "EMPRESA EJEMPLO S.A."
                                                },
                                                "nombre_comercial": {
                                                    "type": "string",
                                                    "example": "EMPRESA EJEMPLO"
                                                },
                                                "direccion_matriz": {
                                                    "type": "string",
                                                    "example": "Guayaquil - Ecuador"
                                                },
                                                "obligado_contabilidad": {
                                                    "type": "boolean",
                                                    "example": true
                                                },
                                                "contribuyente_especial": {
                                                    "type": "string",
                                                    "example": "12345"
                                                },
                                                "ambiente": {
                                                    "type": "string",
                                                    "example": "produccion"
                                                },
                                                "tipo_emision": {
                                                    "type": "string",
                                                    "example": "normal"
                                                },
                                                "regimen_microempresas": {
                                                    "type": "boolean",
                                                    "example": false
                                                },
                                                "agente_retencion": {
                                                    "type": "string",
                                                    "example": "1"
                                                },
                                                "rimpe": {
                                                    "type": "boolean",
                                                    "example": false
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Empresa no encontrada"
                    },
                    "422": {
                        "description": "Error de validación"
                    }
                },
                "security": [
                    {
                        "oauth2": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Empresa"
                ],
                "summary": "Eliminar una empresa",
                "description": "Elimina una empresa si no tiene establecimientos asociados",
                "operationId": "5932f28046b7b98931261a91e37b33b6",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID de la empresa a eliminar",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Empresa eliminada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Empresa eliminada exitosamente"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Empresa no encontrada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Empresa no encontrada"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "No se puede eliminar la empresa",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "No se puede eliminar la empresa porque tiene establecimientos asociados"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "No autorizado"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "oauth2": []
                    }
                ]
            }
        },
        "/empresas/actualizarFirma": {
            "post": {
                "tags": [
                    "Empresa"
                ],
                "summary": "Actualizar firma electrónica",
                "description": "Actualiza la firma electrónica de una empresa utilizando un string en formato base64",
                "operationId": "6fd87cda0e504eba79fd3a5e65ad4178",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "password",
                                    "firma",
                                    "empresa_id",
                                    "opcion"
                                ],
                                "properties": {
                                    "password": {
                                        "description": "Contraseña de la firma electrónica",
                                        "type": "string",
                                        "minLength": 6,
                                        "example": "password123"
                                    },
                                    "firma": {
                                        "description": "Contenido de la firma electrónica en formato base64",
                                        "type": "string",
                                        "format": "text",
                                        "example": "MIIJrgIBAzCCCWoGCSqGSIb3DQEHAaCCCVsEgglXMIIJUzCCBecGCSqGSIb..."
                                    },
                                    "empresa_id": {
                                        "description": "UUID de la empresa a la que se asociará la firma",
                                        "type": "string",
                                        "format": "uuid",
                                        "example": "123e4567-e89b-12d3-a456-426614174000"
                                    },
                                    "opcion": {
                                        "description": "Opción de procesamiento (0: verificar, 1: actualizar)",
                                        "type": "integer",
                                        "enum": [
                                            0,
                                            1
                                        ],
                                        "example": 1
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Firma electrónica actualizada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Firma electrónica actualizada exitosamente"
                                        },
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Error en formato de datos",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "error": {
                                            "type": "string",
                                            "example": "La firma no está en formato base64 válido"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Los datos proporcionados no son válidos"
                                        },
                                        "errors": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Empresa no encontrada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Empresa no encontrada"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "No autorizado"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error del servidor",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "error": {
                                            "type": "string",
                                            "example": "Error al conectar con el servicio SOAP"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "oauth2": []
                    }
                ]
            }
        },
        "/empresas/actualizarFirmaArchivo": {
            "post": {
                "tags": [
                    "Empresa"
                ],
                "summary": "Actualizar firma electrónica",
                "description": "Actualiza la firma electrónica de una empresa",
                "operationId": "17408d92925a9c6784988f13de9fe465",
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "required": [
                                    "password",
                                    "firma",
                                    "empresa_id",
                                    "opcion"
                                ],
                                "properties": {
                                    "password": {
                                        "type": "string",
                                        "minLength": 6,
                                        "example": "password123"
                                    },
                                    "firma": {
                                        "description": "Archivo de firma electrónica (.p12 o .pfx)",
                                        "type": "string",
                                        "format": "binary"
                                    },
                                    "empresa_id": {
                                        "type": "string",
                                        "format": "uuid",
                                        "example": "123e4567-e89b-12d3-a456-426614174000"
                                    },
                                    "opcion": {
                                        "type": "integer",
                                        "enum": [
                                            0,
                                            1
                                        ],
                                        "example": 1
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Firma electrónica actualizada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Firma electrónica actualizada exitosamente"
                                        },
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Los datos proporcionados no son válidos"
                                        },
                                        "errors": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Empresa no encontrada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Empresa no encontrada"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "No autorizado"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "oauth2": []
                    }
                ]
            }
        },
        "/actualizarLogo": {
            "post": {
                "tags": [
                    "Empresa"
                ],
                "summary": "Actualizar logo de empresa",
                "description": "Actualiza el logo de una empresa",
                "operationId": "eb9f584492e4550441226b10d33a6254",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "logo",
                                    "extension",
                                    "empresa_id"
                                ],
                                "properties": {
                                    "logo": {
                                        "type": "string",
                                        "format": "base64",
                                        "example": "data:image/png;base64,..."
                                    },
                                    "extension": {
                                        "type": "string",
                                        "enum": [
                                            "jpg",
                                            "jpeg",
                                            "png"
                                        ],
                                        "example": "png"
                                    },
                                    "empresa_id": {
                                        "type": "string",
                                        "format": "uuid",
                                        "example": "123e4567-e89b-12d3-a456-426614174000"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Logo actualizado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Logo actualizado exitosamente"
                                        },
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Los datos proporcionados no son válidos"
                                        },
                                        "errors": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Empresa no encontrada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Empresa no encontrada"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "No autorizado"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "oauth2": []
                    }
                ]
            }
        },
        "/empresas/{empresa_id}/establecimientos": {
            "get": {
                "tags": [
                    "Establecimientos"
                ],
                "summary": "Obtener listado de establecimientos",
                "operationId": "26b7c360b486ab2074c6e20915ad6715",
                "parameters": [
                    {
                        "name": "empresa_id",
                        "in": "path",
                        "description": "ID de la empresa",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "codigo",
                        "in": "query",
                        "description": "Filtrar por código",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "estado",
                        "in": "query",
                        "description": "Filtrar por estado",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "activo",
                                "inactivo"
                            ]
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de establecimientos obtenida exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "integer",
                                                        "example": 1
                                                    },
                                                    "empresa_id": {
                                                        "type": "integer",
                                                        "example": 1
                                                    },
                                                    "codigo": {
                                                        "type": "string",
                                                        "example": "001"
                                                    },
                                                    "direccion": {
                                                        "type": "string",
                                                        "example": "Av. Principal 123"
                                                    },
                                                    "nombre_comercial": {
                                                        "type": "string",
                                                        "example": "Sucursal Principal"
                                                    },
                                                    "estado": {
                                                        "type": "string",
                                                        "example": "activo"
                                                    },
                                                    "ambiente": {
                                                        "type": "string",
                                                        "example": "produccion"
                                                    },
                                                    "correos_establecimiento": {
                                                        "type": "array",
                                                        "items": {
                                                            "type": "string",
                                                            "example": "sucursal@empresa.com"
                                                        }
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        },
                                        "meta": {
                                            "type": "object"
                                        },
                                        "links": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Empresa no encontrada"
                    }
                },
                "security": [
                    {
                        "oauth2": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Establecimientos"
                ],
                "summary": "Crear un nuevo establecimiento",
                "operationId": "988b2e2cac461e60edb9873a2007f7eb",
                "parameters": [
                    {
                        "name": "empresa_id",
                        "in": "path",
                        "description": "ID de la empresa",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "codigo",
                                    "direccion"
                                ],
                                "properties": {
                                    "codigo": {
                                        "type": "string",
                                        "example": "001"
                                    },
                                    "direccion": {
                                        "type": "string",
                                        "example": "Av. Principal 123"
                                    },
                                    "nombre_comercial": {
                                        "type": "string",
                                        "example": "Sucursal Principal"
                                    },
                                    "estado": {
                                        "type": "string",
                                        "enum": [
                                            "activo",
                                            "inactivo"
                                        ],
                                        "example": "activo"
                                    },
                                    "ambiente": {
                                        "type": "string",
                                        "enum": [
                                            "produccion",
                                            "pruebas"
                                        ],
                                        "example": "produccion"
                                    },
                                    "correos_establecimiento": {
                                        "type": "array",
                                        "items": {
                                            "type": "string",
                                            "example": "sucursal@empresa.com"
                                        }
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Establecimiento creado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "empresa_id": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "codigo": {
                                                    "type": "string",
                                                    "example": "001"
                                                },
                                                "direccion": {
                                                    "type": "string",
                                                    "example": "Av. Principal 123"
                                                },
                                                "nombre_comercial": {
                                                    "type": "string",
                                                    "example": "Sucursal Principal"
                                                },
                                                "estado": {
                                                    "type": "string",
                                                    "example": "activo"
                                                },
                                                "ambiente": {
                                                    "type": "string",
                                                    "example": "produccion"
                                                },
                                                "correos_establecimiento": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "sucursal@empresa.com"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación"
                    }
                },
                "security": [
                    {
                        "oauth2": []
                    }
                ]
            }
        },
        "/empresas/{empresa_id}/establecimientos/{establecimiento_id}": {
            "get": {
                "tags": [
                    "Establecimientos"
                ],
                "summary": "Obtener un establecimiento específico",
                "operationId": "6c733a55250d0ef16ba52b6bf2aa4ac0",
                "parameters": [
                    {
                        "name": "empresa_id",
                        "in": "path",
                        "description": "ID de la empresa",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "establecimiento_id",
                        "in": "path",
                        "description": "ID del establecimiento",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Establecimiento encontrado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "empresa_id": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "codigo": {
                                                    "type": "string",
                                                    "example": "001"
                                                },
                                                "direccion": {
                                                    "type": "string",
                                                    "example": "Av. Principal 123"
                                                },
                                                "nombre_comercial": {
                                                    "type": "string",
                                                    "example": "Sucursal Principal"
                                                },
                                                "estado": {
                                                    "type": "string",
                                                    "example": "activo"
                                                },
                                                "ambiente": {
                                                    "type": "string",
                                                    "example": "produccion"
                                                },
                                                "correos_establecimiento": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "sucursal@empresa.com"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Establecimiento no encontrado"
                    }
                },
                "security": [
                    {
                        "oauth2": []
                    }
                ]
            },
            "put": {
                "tags": [
                    "Establecimientos"
                ],
                "summary": "Actualizar un establecimiento",
                "operationId": "3852451005837ca629c81e8fee179630",
                "parameters": [
                    {
                        "name": "empresa_id",
                        "in": "path",
                        "description": "ID de la empresa",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "establecimiento_id",
                        "in": "path",
                        "description": "ID del establecimiento",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "direccion": {
                                        "type": "string",
                                        "example": "Av. Principal 123"
                                    },
                                    "nombre_comercial": {
                                        "type": "string",
                                        "example": "Sucursal Principal"
                                    },
                                    "estado": {
                                        "type": "string",
                                        "enum": [
                                            "activo",
                                            "inactivo"
                                        ],
                                        "example": "activo"
                                    },
                                    "ambiente": {
                                        "type": "string",
                                        "enum": [
                                            "produccion",
                                            "pruebas"
                                        ],
                                        "example": "produccion"
                                    },
                                    "correos_establecimiento": {
                                        "type": "array",
                                        "items": {
                                            "type": "string",
                                            "example": "sucursal@empresa.com"
                                        }
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Establecimiento actualizado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "empresa_id": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "codigo": {
                                                    "type": "string",
                                                    "example": "001"
                                                },
                                                "direccion": {
                                                    "type": "string",
                                                    "example": "Av. Principal 123"
                                                },
                                                "nombre_comercial": {
                                                    "type": "string",
                                                    "example": "Sucursal Principal"
                                                },
                                                "estado": {
                                                    "type": "string",
                                                    "example": "activo"
                                                },
                                                "ambiente": {
                                                    "type": "string",
                                                    "example": "produccion"
                                                },
                                                "correos_establecimiento": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "sucursal@empresa.com"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Establecimiento no encontrado"
                    },
                    "422": {
                        "description": "Error de validación"
                    }
                },
                "security": [
                    {
                        "oauth2": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Establecimientos"
                ],
                "summary": "Eliminar un establecimiento",
                "operationId": "ac913987bd7eb47e5930b650bb8066ce",
                "parameters": [
                    {
                        "name": "empresa_id",
                        "in": "path",
                        "description": "ID de la empresa",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "establecimiento_id",
                        "in": "path",
                        "description": "ID del establecimiento",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Establecimiento eliminado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Establecimiento eliminado exitosamente"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Establecimiento no encontrado"
                    },
                    "422": {
                        "description": "No se puede eliminar el establecimiento porque tiene puntos de emisión asociados"
                    }
                },
                "security": [
                    {
                        "oauth2": []
                    }
                ]
            }
        },
        "/empresas/{empresa}/establecimientos/{establecimiento}/puntos-emision": {
            "get": {
                "tags": [
                    "Puntos de Emisión"
                ],
                "summary": "Obtener listado de puntos de emisión",
                "description": "Obtiene el listado de puntos de emisión de un establecimiento",
                "operationId": "7cca4388cd5691cf99716f3a1c9c06f1",
                "parameters": [
                    {
                        "name": "empresa",
                        "in": "path",
                        "description": "ID de la empresa",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "establecimiento",
                        "in": "path",
                        "description": "ID del establecimiento",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "codigo",
                        "in": "query",
                        "description": "Filtrar por código",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "tipo_comprobante",
                        "in": "query",
                        "description": "Filtrar por tipo de comprobante",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "estado",
                        "in": "query",
                        "description": "Filtrar por estado",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de puntos de emisión"
                    }
                },
                "security": [
                    {
                        "oauth2": []
                    }
                ]
            }
        },
        "/empresas/{empresa_id}/establecimientos/{establecimiento_id}/puntos-emision": {
            "post": {
                "tags": [
                    "Puntos de Emisión"
                ],
                "summary": "Crear un nuevo punto de emisión",
                "description": "Crea un nuevo punto de emisión para un establecimiento específico",
                "operationId": "50481039671445402bfe026be4af667f",
                "parameters": [
                    {
                        "name": "empresa_id",
                        "in": "path",
                        "description": "ID de la empresa",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "establecimiento_id",
                        "in": "path",
                        "description": "ID del establecimiento",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "description": "Datos del nuevo punto de emisión",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "codigo",
                                    "tipo_comprobante",
                                    "secuencial_actual",
                                    "estado",
                                    "ambiente"
                                ],
                                "properties": {
                                    "codigo": {
                                        "description": "Código de 3 dígitos del punto de emisión",
                                        "type": "string",
                                        "example": "001"
                                    },
                                    "tipo_comprobante": {
                                        "description": "01:Factura, 02:Nota Débito, 03:Nota Crédito, 04:Guía Remisión, 05:Comp. Retención",
                                        "type": "string",
                                        "enum": [
                                            "01",
                                            "02",
                                            "03",
                                            "04",
                                            "05",
                                            "06",
                                            "07"
                                        ],
                                        "example": "01"
                                    },
                                    "secuencial_actual": {
                                        "description": "Número secuencial inicial",
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "estado": {
                                        "description": "Estado del punto de emisión",
                                        "type": "string",
                                        "enum": [
                                            "activo",
                                            "inactivo"
                                        ],
                                        "example": "activo"
                                    },
                                    "ambiente": {
                                        "description": "Ambiente del punto de emisión",
                                        "type": "string",
                                        "enum": [
                                            "produccion",
                                            "pruebas"
                                        ],
                                        "example": "produccion"
                                    },
                                    "identificador_externo": {
                                        "description": "Identificador externo para mapeo con otros sistemas",
                                        "type": "string",
                                        "example": "POS-001",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Punto de emisión creado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "establecimiento_id": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "codigo": {
                                                    "type": "string",
                                                    "example": "001"
                                                },
                                                "tipo_comprobante": {
                                                    "type": "string",
                                                    "example": "01"
                                                },
                                                "secuencial_actual": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "estado": {
                                                    "type": "string",
                                                    "example": "activo"
                                                },
                                                "ambiente": {
                                                    "type": "string",
                                                    "example": "produccion"
                                                },
                                                "identificador_externo": {
                                                    "type": "string",
                                                    "example": "POS-001"
                                                },
                                                "secuencias": {
                                                    "properties": {
                                                        "factura": {
                                                            "type": "integer",
                                                            "example": 1
                                                        },
                                                        "nota_credito": {
                                                            "type": "integer",
                                                            "example": 1
                                                        },
                                                        "nota_debito": {
                                                            "type": "integer",
                                                            "example": 1
                                                        },
                                                        "guia_remision": {
                                                            "type": "integer",
                                                            "example": 1
                                                        },
                                                        "retencion": {
                                                            "type": "integer",
                                                            "example": 1
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "created_at": {
                                                    "type": "string",
                                                    "format": "datetime",
                                                    "example": "2024-01-01 00:00:00"
                                                },
                                                "updated_at": {
                                                    "type": "string",
                                                    "format": "datetime",
                                                    "example": "2024-01-01 00:00:00"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Los datos proporcionados no son válidos"
                                        },
                                        "errors": {
                                            "properties": {
                                                "codigo": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "El código debe tener exactamente 3 dígitos"
                                                    }
                                                },
                                                "tipo_comprobante": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "El tipo de comprobante seleccionado no es válido"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "No tiene permisos para crear puntos de emisión"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Establecimiento no encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Establecimiento no encontrado"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "oauth2": []
                    }
                ]
            }
        },
        "/empresas/{empresa}/establecimientos/{establecimiento}/puntos-emision/{punto_emision}": {
            "get": {
                "tags": [
                    "Puntos de Emisión"
                ],
                "summary": "Obtener información de un punto de emisión específico",
                "description": "Retorna los detalles de un punto de emisión",
                "operationId": "7af58929c684923d38c2d77f9a443c16",
                "parameters": [
                    {
                        "name": "empresa",
                        "in": "path",
                        "description": "ID de la empresa",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "establecimiento",
                        "in": "path",
                        "description": "ID del establecimiento",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "punto_emision",
                        "in": "path",
                        "description": "ID del punto de emisión",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Información del punto de emisión",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "oauth2": []
                    }
                ]
            },
            "put": {
                "tags": [
                    "Puntos de Emisión"
                ],
                "summary": "Actualizar un punto de emisión",
                "operationId": "a9d563f98070d61fe162eedd2661da26",
                "parameters": [
                    {
                        "name": "empresa",
                        "in": "path",
                        "description": "ID de la empresa",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "establecimiento",
                        "in": "path",
                        "description": "ID del establecimiento",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "punto_emision",
                        "in": "path",
                        "description": "ID del punto de emisión",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "estado": {
                                        "type": "string",
                                        "enum": [
                                            "activo",
                                            "inactivo"
                                        ],
                                        "example": "activo"
                                    },
                                    "ambiente": {
                                        "type": "string",
                                        "enum": [
                                            "produccion",
                                            "pruebas"
                                        ],
                                        "example": "produccion"
                                    },
                                    "identificador_externo": {
                                        "type": "string",
                                        "example": "POS-001"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Punto de emisión actualizado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "establecimiento_id": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "codigo": {
                                                    "type": "string",
                                                    "example": "001"
                                                },
                                                "tipo_comprobante": {
                                                    "type": "string",
                                                    "example": "01"
                                                },
                                                "secuencial_actual": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "estado": {
                                                    "type": "string",
                                                    "example": "activo"
                                                },
                                                "ambiente": {
                                                    "type": "string",
                                                    "example": "produccion"
                                                },
                                                "identificador_externo": {
                                                    "type": "string",
                                                    "example": "POS-001"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "oauth2": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Puntos de Emisión"
                ],
                "summary": "Eliminar un punto de emisión",
                "operationId": "f62cb066a234f26a8b9e790c48dad777",
                "parameters": [
                    {
                        "name": "empresa",
                        "in": "path",
                        "description": "ID de la empresa",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "establecimiento",
                        "in": "path",
                        "description": "ID del establecimiento",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "punto_emision",
                        "in": "path",
                        "description": "ID del punto de emisión",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Punto de emisión eliminado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Punto de emisión eliminado exitosamente"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Recurso no encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "No se encontró el punto de emisión"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "oauth2": []
                    }
                ]
            }
        },
        "/empresas/{empresa}/establecimientos/{establecimiento}/puntos-emision/{punto_emision}/secuencial": {
            "put": {
                "tags": [
                    "Puntos de Emisión"
                ],
                "summary": "Actualizar secuencial de un punto de emisión",
                "description": "Actualiza el número secuencial y registra el cambio en el historial",
                "operationId": "3741d57aba5c04425bd33d2f154e950c",
                "parameters": [
                    {
                        "name": "empresa",
                        "in": "path",
                        "description": "ID de la empresa",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "establecimiento",
                        "in": "path",
                        "description": "ID del establecimiento",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "punto_emision",
                        "in": "path",
                        "description": "ID del punto de emisión",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "secuencial_actual",
                                    "motivo"
                                ],
                                "properties": {
                                    "secuencial_actual": {
                                        "description": "Nuevo número secuencial",
                                        "type": "integer",
                                        "example": 100
                                    },
                                    "motivo": {
                                        "description": "Motivo del cambio de secuencial",
                                        "type": "string",
                                        "example": "Actualización por cambio de sistema"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Secuencial actualizado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "properties": {
                                                "id": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "establecimiento_id": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "codigo": {
                                                    "type": "string",
                                                    "example": "001"
                                                },
                                                "tipo_comprobante": {
                                                    "type": "string",
                                                    "example": "01"
                                                },
                                                "secuencial_actual": {
                                                    "type": "integer",
                                                    "example": 100
                                                },
                                                "estado": {
                                                    "type": "string",
                                                    "example": "activo"
                                                },
                                                "ambiente": {
                                                    "type": "string",
                                                    "example": "produccion"
                                                },
                                                "identificador_externo": {
                                                    "type": "string",
                                                    "example": "POS-001"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Punto de emisión o establecimiento no encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "No se encontró el recurso solicitado"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Los datos proporcionados no son válidos"
                                        },
                                        "errors": {
                                            "properties": {
                                                "secuencial_actual": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "El secuencial debe ser mayor a 0"
                                                    }
                                                },
                                                "motivo": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "El motivo del cambio es requerido"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "oauth2": []
                    }
                ]
            }
        }
    },
    "components": {
        "securitySchemes": {
            "oauth2": {
                "type": "oauth2",
                "description": "Autenticación OAuth2",
                "in": "header",
                "flows": {
                    "password": {
                        "tokenUrl": "/oauth/token",
                        "refreshUrl": "/oauth/token/refresh",
                        "scopes": {
                            "admin": "Acceso de administrador",
                            "user": "Acceso de usuario",
                            "desarrollo": "Acceso ambiente desarrollo",
                            "produccion": "Acceso ambiente producción"
                        }
                    }
                },
                "bearerFormat": "JWT",
                "scheme": "bearer"
            }
        }
    },
    "tags": [
        {
            "name": "Administracion",
            "description": "Endpoints para administracion intera "
        },
        {
            "name": "SRI",
            "description": "Endpoints relacionados con el Servicio de Rentas Internas"
        },
        {
            "name": "RIDE_XML",
            "description": "Endpoints para los documentos Electronicos Autorizados del SRI "
        },
        {
            "name": "Facturación",
            "description": "Endpoints para la gestión de facturas electrónicas"
        },
        {
            "name": "Guías de Remisión",
            "description": "Endpoints para gestión de guías de remisión electrónicas"
        },
        {
            "name": "Liquidaciones de Compra",
            "description": "Endpoints para gestión de liquidaciones de compra electrónicas"
        },
        {
            "name": "Notas de Crédito",
            "description": "Endpoints para gestión de notas de crédito electrónicas"
        },
        {
            "name": "Retenciones",
            "description": "Endpoints para gestión de retenciones electrónicas"
        },
        {
            "name": "Empresa",
            "description": "Endpoints para gestión de empresas"
        },
        {
            "name": "Establecimientos",
            "description": "Endpoints para gestión de establecimientos de una empresa"
        },
        {
            "name": "Puntos de Emisión",
            "description": "Endpoints para gestión de puntos de emisión de un establecimiento"
        }
    ],
    "security": [
        {
            "passport": []
        }
    ]
}